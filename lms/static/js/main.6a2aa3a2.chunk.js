(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,t,n){},39:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),s=n.n(r),a=n(13),o=n.n(a),i=(n(33),n(5)),u=n(8),j=n(7),l=n(6),d=n(2),h=n.n(d),b=n(4),O=n(3),f="http://185.62.175.216:5000",m=function(e){var t=Object(u.g)(),n=Object(r.useState)(""),s=Object(O.a)(n,2),a=s[0],o=s[1],i=Object(r.useState)({email:"",password:""}),d=Object(O.a)(i,2),m=d[0],x=d[1],p=function(){var e=Object(b.a)(h.a.mark((function e(){var n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.email,c=m.password,r="".concat(f,"/auth/auth_student?email=").concat(n,"&password=").concat(c),e.next=5,fetch(r).then((function(e){return e.json()})).then((function(e){if("OK"===e.status)if(e.result.authenticated){var n=e.result.token,c=e.result.id;sessionStorage.setItem("jwt",n),t.push("/s/".concat(c))}else o("Credentials are wrong!");else alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(h.a.mark((function e(){var n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.email,c=m.password,r="".concat(f,"/auth/auth_teacher?email=").concat(n,"&password=").concat(c),e.next=5,fetch(r).then((function(e){return e.json()})).then((function(e){if("OK"===e.status)if(e.result.authenticated){var n=e.result.token,c=e.result.id;sessionStorage.setItem("jwt",n),t.push("/t/".concat(c))}else o("Credentials are wrong!");else alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;x(Object(l.a)(Object(l.a)({},m),{},Object(j.a)({},t,n)))};return Object(c.jsx)("div",{style:{borderRadius:"12px"},className:"Login",children:Object(c.jsxs)("div",{className:"right-pane",children:[Object(c.jsx)("h2",{children:"Learning Management System"}),Object(c.jsx)("br",{}),Object(c.jsx)("p",{className:"error",children:a}),Object(c.jsx)("input",{placeholder:"Email...",type:"text",name:"email",value:m.email,onChange:g}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{placeholder:"Password...",type:"password",name:"password",value:m.password,onChange:g}),Object(c.jsx)("br",{}),Object(c.jsxs)("div",{className:"button-box",children:[Object(c.jsx)("button",{onClick:function(){return p()},children:"Login as student"}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{onClick:function(){return v()},children:"Login as teacher"})]})]})})};n(39);function x(){var e=Object(r.useContext)(ve),t=Object(r.useState)("home"),n=Object(O.a)(t,2),s=n[0],a=n[1],o=Object(u.g)(),j=Object(u.i)(),l=Object(r.useState)(""),d=Object(O.a)(l,2),m=d[0],x=d[1];return Object(r.useEffect)((function(){(function(){var t=Object(b.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="Bearer "+sessionStorage.getItem("jwt"),t.next=3,fetch("".concat(f,"/students/").concat(e),{headers:{Authorization:n}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?x(e.result.firstname+" "+e.result.lastname):console.log(e.message)})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(c.jsxs)("div",{className:"sidenav",children:[Object(c.jsx)(p,{fullName:m}),Object(c.jsxs)(i.b,{to:"".concat(j.url,"/home"),onClick:function(){return a("home")},className:"home"===s?"active":"",children:[Object(c.jsx)("i",{className:"material-icons",children:"home"}),Object(c.jsx)("p",{children:"Home"})]}),Object(c.jsxs)(i.b,{to:"".concat(j.url,"/schedule"),onClick:function(){return a("schedule")},className:"schedule"===s?"active":"",children:[Object(c.jsx)("i",{className:"material-icons",children:"schedule"}),Object(c.jsx)("p",{children:"Schedule"})]}),Object(c.jsxs)(i.b,{to:"".concat(j.url,"/courses"),onClick:function(){return a("courses")},className:"courses"===s?"active":"",children:[Object(c.jsx)("i",{className:"material-icons",children:"description"}),Object(c.jsx)("p",{children:"Courses"})]}),Object(c.jsxs)(i.b,{to:"".concat(j.url,"/settings"),onClick:function(){return a("settings")},className:"settings"===s?"active":"",children:[Object(c.jsx)("i",{className:"material-icons",children:"settings"}),Object(c.jsx)("p",{children:"Settings"})]}),Object(c.jsxs)(i.b,{to:"/",onClick:function(e){e.preventDefault(),sessionStorage.setItem("jwt",""),o.push("/")},className:"logout",children:[Object(c.jsx)("i",{className:"material-icons",children:"logout"}),Object(c.jsx)("p",{children:"Log out"})]})]})}var p=function(e){var t=e.fullName,n=Object(r.useContext)(ve);return Object(c.jsxs)("div",{className:"profile",children:[Object(c.jsx)("div",{className:"profile__picture",children:Object(c.jsx)("img",{src:"".concat(f,"/students/").concat(n,"/picture")})}),Object(c.jsx)("h5",{children:t})]})};function v(e){var t=e.length,n=4,c=10,r="",s="";return e.forEach((function(e){e.grade<c&&(c=e.grade,s=e.name),e.grade>n&&(n=e.grade,r=e.name)})),{totalGrades:t,maxGrade:n,minGrade:c,maxCourse:r,minCourse:s}}function g(e){var t=0,n=0;e.forEach((function(e){t+=e.attended,n+=e.length}));var c="#009c0d";return t/n<.5?c="#c9040b":t/n<.8&&(c="#d1d113"),{attended:t,total:n,color:c}}function y(e){var t=Object(r.useContext)(ve),n=Object(r.useState)({attended:0,total:0,color:"#009c0d"}),s=Object(O.a)(n,2),a=s[0],o=s[1],i=Object(r.useState)({totalGrades:0,maxGrade:10,maxCourse:"",minGrade:4,minCourse:""}),u=Object(O.a)(i,2),j=u[0],l=u[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,e.next=4,fetch("".concat(f,"/students/").concat(t,"/grades"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){if("OK"===e.status){var t=v(e.result);l(t)}else alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:return e.next=6,fetch("".concat(f,"/students/").concat(t,"/attendance"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){if("OK"===e.status){var t=g(e.result);o(t)}else alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(c.jsxs)("div",{className:"statistics",children:[Object(c.jsx)("div",{className:"statistics__head",children:Object(c.jsx)("h3",{children:"Statistics"})}),Object(c.jsxs)("div",{className:"statistics__numbers",children:[Object(c.jsxs)("div",{className:"statistics__numbers__grades-count",children:[Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:"Total grades"})}),Object(c.jsx)("strong",{children:j.totalGrades})]}),Object(c.jsxs)("div",{className:"statistics__numbers__max-grade",children:[Object(c.jsx)("p",{children:"Max grade"}),Object(c.jsx)("strong",{children:j.maxGrade})]}),Object(c.jsxs)("div",{className:"statistics__numbers__min-grade",children:[Object(c.jsx)("p",{children:"Min grade"}),Object(c.jsx)("strong",{children:j.minGrade})]}),Object(c.jsxs)("div",{className:"statistics__numbers__missings",children:[Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:"Attended / Total"})}),Object(c.jsxs)("strong",{style:{color:a.color},children:[a.attended," / ",a.total]})]})]}),Object(c.jsxs)("div",{className:"statistics__courses",children:[Object(c.jsxs)("div",{className:"statistics__courses__max",children:[Object(c.jsx)("p",{children:"Max. Grade"}),Object(c.jsx)("strong",{children:j.maxCourse})]}),Object(c.jsxs)("div",{className:"statistics__courses__min",children:[Object(c.jsx)("p",{children:"Min. Grade"}),Object(c.jsx)("strong",{children:j.minCourse})]})]})]})}var w=function(e){return/^\S+@\S+\.\S+$/.test(e)},C=function(e){return/^[a-zA-z]{0,30}$/.test(e)},N=function(e){return/^\+?\d{10,14}$/.test(e)},S=function(e){for(var t=[],n=-1,c=0,r="",s=0;s<e.length;s++){var a=e[s];r!==a.day_name&&(r=a.day_name,c=0,t[++n]={name:r,hours:[],day:a.day}),t[n].hours[c]={id:a.id,start:a.start,end:a.end,course_name:a.course_name,course_category:a.course_category,courseInstanceID:a.courseInstanceID},c++}return t},I=function(e){for(var t=[],n=-1,c=-1,r=0;r<e.length;r++){var s=e[r],a={id:s.id,grade:s.grade,comment:s.comment,date:s.date};n!==s.studentID&&(c++,n=s.studentID,t[c]={id:s.studentID,firstname:s.firstname,lastname:s.lastname,grades:[]}),t[c].grades.push(a)}return t},k=function(e){for(var t=[],n=-1,c=-1,r=0;r<e.length;r++){var s=e[r];s.studentID!==n&&(n=s.studentID,t[++c]={id:s.studentID,firstname:s.firstname,lastname:s.lastname,files:[]}),t[c].files.push(s)}return t},E=["#eb506f","#7e50eb","#50ebb2","#50eb55","#d9eb50"],D=function(e){return E[e%E.length]},_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e){var t=e.event,n=new Date(t.due),r=_[n.getMonth()],s=n.getDay()<10?"0"+n.getDay():n.getDay(),a=D(e.event.id),o={border:"2px solid ".concat(a),borderRadius:"10px 0 0 10px"};return Object(c.jsxs)("div",{className:"event",children:[Object(c.jsxs)("div",{style:o,className:"event__date",children:[Object(c.jsx)("p",{className:"event__date__day",children:Object(c.jsx)("b",{children:s})}),Object(c.jsx)("p",{className:"event__date__month",children:r})]}),Object(c.jsxs)("div",{className:"event__description",children:[Object(c.jsx)("h4",{children:t.title}),Object(c.jsx)("p",{children:t.classInstanceID?"Class":"School"})]})]})}var B=function(e){var t=Object(r.useContext)(ve),n=Object(r.useState)([]),s=Object(O.a)(n,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,e.next=4,fetch("".concat(f,"/students/").concat(t,"/events"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?o(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsxs)("div",{className:"events",children:[Object(c.jsx)("div",{className:"head",children:Object(c.jsx)("h3",{children:"Upcoming Events"})}),Object(c.jsx)("div",{className:"events__list",children:a.map((function(e){return Object(c.jsx)(A,{event:e},e.id)}))})]})};var z=function(e){return Object(c.jsxs)("div",{className:"home",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Home"})}),Object(c.jsx)("section",{children:Object(c.jsxs)("div",{className:"dashboard",children:[Object(c.jsx)("div",{className:"personal",children:Object(c.jsx)(y,{})}),Object(c.jsx)(B,{})]})})]})},K=s.a.createContext({postId:0,updateList:function(){return console.log("Comment list")},deleteCommentUrl:"",postCommentUrl:"",courseId:0,userId:0,userType:""}),T=function(e){var t=Object(r.useState)(!1),n=Object(O.a)(t,2),s=n[0],a=n[1];return Object(c.jsxs)("div",{className:"comment-list",children:[Object(c.jsxs)("div",{className:"comment-list__count",onClick:function(){return a(!s)},children:[Object(c.jsx)("i",{className:"material-icons",children:"chat"}),Object(c.jsx)("p",{children:"".concat(e.comments.length," comments")})]}),s?Object(c.jsx)(L,{comments:e.comments}):null,Object(c.jsx)("div",{className:"comment-list__form",children:Object(c.jsx)(P,{})})]})},L=function(e){return Object(c.jsx)("div",{className:"comment-list_comments",children:e.comments.map((function(e){return Object(c.jsx)(G,{comment:e},e.id)}))})},G=function(e){var t=Object(r.useContext)(K),n=t.updateList,s=t.deleteCommentUrl,a=t.userId,o=t.userType,i="";i=e.comment.studentID?"".concat(f,"/students/").concat(e.comment.studentID,"/picture"):"".concat(f,"/teachers/").concat(e.comment.teacherID,"/picture");var u=!1;return("student"===o&&e.comment.studentID==a||"teacher"===o&&e.comment.teacherID==a)&&(u=!0),Object(c.jsxs)("div",{className:"comment",children:[Object(c.jsx)("div",{className:"comment__photo",children:Object(c.jsx)("img",{src:i})}),Object(c.jsxs)("div",{className:"comment__info",children:[Object(c.jsxs)("div",{className:"comment__info__header",children:[Object(c.jsx)("b",{children:e.comment.firstname+" "+e.comment.lastname}),Object(c.jsx)("p",{children:e.comment.commented_on}),u?Object(c.jsx)("i",{className:"material-icons",onClick:function(t){t.preventDefault();var c="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(s,"/").concat(e.comment.id),{method:"delete",headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(alert("Success!",e.message,"success"),n()):alert("Error!",e.message,"error")})).catch((function(e){return console.log(e)}))},children:"delete"}):null]}),Object(c.jsx)("div",{className:"comment__info__comment",children:Object(c.jsx)("p",{children:e.comment.comment})})]})]})},P=function(){var e=Object(r.useContext)(K),t=e.updateList,n=e.postCommentUrl,s=Object(r.useState)(""),a=Object(O.a)(s,2),o=a[0],i=a[1],u=function(e){if(e.preventDefault(),""!==o){var c="Bearer "+sessionStorage.getItem("jwt");fetch(n,{method:"post",headers:{Authorization:c,"Content-Type":"application/json"},body:JSON.stringify({comment:o})}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(alert("Success!",e.message,"success"),t()):alert("Error!",e.message,"error")})).catch((function(e){return console.log(e)}))}else alert("Error!","Cannot have empty comment!","error")};return Object(c.jsxs)("form",{onSubmit:u,autoComplete:"off",children:[Object(c.jsx)("input",{type:"text",name:"comment",placeholder:"Add a new comment",value:o,onChange:function(e){e.preventDefault();var t=e.target.value;""===t&&alert("Error!","You cannot have empty comment","error"),i(t)}}),Object(c.jsx)("i",{className:"material-icons",onClick:u,children:"send"})]})};function U(e){var t=e.post,n=t.body.split("\n");return Object(c.jsxs)("div",{className:"post-item",children:[Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:t.author})}),Object(c.jsx)("p",{children:t.posted_on})]}),Object(c.jsxs)("div",{className:"body",children:[Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:t.title})}),n.map((function(e){return Object(c.jsx)("p",{children:e})}))]}),Object(c.jsx)(J,{postId:t.id})]})}var J=function(e){var t=e.postId,n=Object(r.useContext)(ve),s=Object(r.useContext)(ne),a=Object(r.useState)(0),o=Object(O.a)(a,2),i=o[0],u=o[1],j=Object(r.useState)([]),l=Object(O.a)(j,2),d=l[0],h=l[1];return Object(r.useEffect)((function(){var e="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/students/").concat(n,"/courses/").concat(s.id,"/posts/").concat(t,"/comments"),{headers:{Authorization:e}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?h(e.result):console.log(e.message)})).catch((function(e){return console.log(e)}))}),[n,s.id,t,i]),Object(c.jsx)(K.Provider,{value:{postId:t,updateList:function(){return u(i+1)},deleteCommentUrl:"".concat(f,"/students/").concat(n,"/courses/").concat(s.id,"/posts/").concat(t,"/comments"),postCommentUrl:"".concat(f,"/students/").concat(n,"/courses/").concat(s.id,"/posts/").concat(t,"/comments"),courseId:s.id,userId:n,userType:"student"},children:Object(c.jsx)(T,{postId:t,comments:d})})};function M(e){var t=e.updateCallback,n=Object(r.useContext)(ve),s=Object(r.useContext)(ne),a=Object(r.useState)(!1),o=Object(O.a)(a,2),i=o[0],u=o[1],d=Object(r.useState)({title:"",body:""}),m=Object(O.a)(d,2),x=m[0],p=m[1],v=function(e){e.preventDefault();var t=e.target,n=t.name,c=t.value;"title"===n&&c.length>100?alert("Error","Title is too long!","error"):p(Object(l.a)(Object(l.a)({},x),{},Object(j.a)({},n,c)))},g=function(){var e=Object(b.a)(h.a.mark((function e(c){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),r=sessionStorage.getItem("jwt"),a="Bearer "+r,o={title:x.title,body:x.body},e.next=6,fetch("".concat(f,"/students/").concat(n,"/courses/").concat(s.id,"/posts"),{method:"post",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(alert("Success!",e.message,"success"),t(),u(!1)):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"post-form",children:[Object(c.jsx)("button",{onClick:function(){return u(!0)},className:i?"hidden":"shown",children:"Post"}),Object(c.jsxs)("form",{onSubmit:g,className:i?"shown":"hidden",children:[Object(c.jsxs)("label",{children:["Title",Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",onChange:v,name:"title",placeholder:"Post title",value:x.title})]}),Object(c.jsxs)("label",{children:["Body",Object(c.jsx)("br",{}),Object(c.jsx)("textarea",{onChange:v,name:"body",rows:"10",cols:"30",placeholder:"Post body",value:x.body})]}),Object(c.jsx)("button",{type:"submit",children:"Add post"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),u(!1)},children:"Cancel"})]})]})}var R=function(e){var t=Object(r.useContext)(ne),n=Object(r.useContext)(ve),s=Object(r.useState)([]),a=Object(O.a)(s,2),o=a[0],i=a[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),l=j[0],d=j[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/students/").concat(n,"/courses/").concat(t.id,"/posts"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?i(e.result):alert("Error",e.message,"error")}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,t.id,n]),Object(c.jsxs)("div",{className:"post-list",children:[Object(c.jsx)(M,{updateCallback:function(){return d(l+1)}}),o.map((function(e){return Object(c.jsx)(U,{post:e},e.id)}))]})};function F(e){var t=Object(r.useContext)(ne),n=Object(r.useContext)(ve),s=Object(r.useState)([]),a=Object(O.a)(s,2),o=a[0],i=a[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/students/").concat(n,"/courses/").concat(t.id,"/files"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?i(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsxs)("div",{className:"file-list",children:[Object(c.jsx)("h2",{children:"General course files"}),Object(c.jsx)("ul",{children:o.map((function(e){return Object(c.jsx)(H,{file:e},e.id)}))})]})}function H(e){var t=e.file,n=Object(r.useContext)(ve),s=t.courseInstanceID,a=t.filename.replace(/-\d{7,}/,""),o="".concat(f,"/students/").concat(n,"/courses/").concat(s,"/files/").concat(t.filename);return Object(c.jsxs)("li",{id:t.id,children:[Object(c.jsx)("p",{children:a}),Object(c.jsx)("div",{className:"actions",children:Object(c.jsx)("i",{className:"material-icons",onClick:function(e){e.preventDefault(),window.open(o,"_blank")},children:"download"})})]})}function Y(e){var t=Object(r.useContext)(ve),n=Object(r.useContext)(ne),s=Object(r.useState)([]),a=Object(O.a)(s,2),o=a[0],i=a[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/students/").concat(t,"/courses/").concat(n.id,"/assignments"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?i(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)("div",{className:"assignment-list",children:o.map((function(e){return Object(c.jsx)(W,{assignment:e},e.id)}))})}function W(e){var t=Object(u.i)().url;return Object(c.jsxs)("div",{className:"assignment",children:[Object(c.jsxs)("div",{className:"title",children:[Object(c.jsx)("i",{className:"material-icons",children:"folder"}),Object(c.jsx)(i.b,{to:"".concat(t,"/").concat(e.assignment.id),children:e.assignment.title})]}),Object(c.jsxs)("p",{children:["Due ",e.assignment.due]})]})}function V(e){var t=Object(r.useContext)(ve),n=Object(r.useContext)(ne),s=Object(u.h)().assignmentId,a=Object(r.useState)(0),o=Object(O.a)(a,2),i=o[0],j=o[1],l=Object(r.useState)([]),d=Object(O.a)(l,2),m=d[0],x=d[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/students/").concat(t,"/courses/").concat(n.id,"/assignments/").concat(s,"/studentfiles"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?x(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]);var p=Object(r.useState)(null),v=Object(O.a)(p,2),g=v[0],y=v[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/students/").concat(t,"/courses/").concat(n.id,"/assignments/").concat(s),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?y(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]);var w=Object(r.useState)([]),C=Object(O.a)(w,2),N=C[0],S=C[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/students/").concat(t,"/courses/").concat(n.id,"/assignments/").concat(s,"/files"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?S(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]);var I=function(){return j(i+1)};return Object(c.jsxs)("div",{className:"assignment",children:[Object(c.jsx)("h2",{children:g?g.title:"title"}),Object(c.jsx)("p",{children:g?g.description:"description"}),Object(c.jsxs)("div",{className:"files",children:[Object(c.jsxs)("div",{className:"file-list",children:[Object(c.jsx)("h4",{children:"Assignment files"}),Object(c.jsx)("ul",{children:N.map((function(e){return Object(c.jsx)(H,{file:e},e.id)}))})]}),Object(c.jsxs)("div",{className:"file-list",children:[Object(c.jsx)("h4",{children:"My files"}),Object(c.jsx)(q,{classInstanceId:n.classInstanceID,studentId:t,courseId:n.id,updateCallback:I,assignmentId:s}),Object(c.jsx)("ul",{children:m.map((function(e){return Object(c.jsx)($,{file:e,updateList:I},e.id)}))})]})]})]})}function $(e){var t=e.file,n=e.updateList,r=t.courseInstanceID,s=t.studentID,a=t.filename,o=Object(u.h)().assignmentId;return Object(c.jsxs)("li",{id:t.id,children:[Object(c.jsx)("p",{children:a.replace(/-\d{7,}/,"")}),Object(c.jsxs)("div",{className:"actions",children:[Object(c.jsx)("i",{className:"material-icons download",onClick:function(e){e.preventDefault();var t="".concat(f,"/students/").concat(s,"/courses/").concat(r,"/assignments/").concat(o,"/studentfiles/").concat(a);window.open(t,"_blank")},children:"download"}),Object(c.jsx)("i",{className:"material-icons delete",onClick:function(e){e.preventDefault();var c="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/students/").concat(s,"/courses/").concat(r,"/assignments/").concat(o,"/studentfiles/").concat(t.id),{method:"delete",headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error",e.message,"error"),n()})).catch((function(e){return console.log(e)}))},children:"delete"})]})]})}function q(e){var t=e.studentId,n=e.courseId,r=e.assignmentId,s=function(){var c=Object(b.a)(h.a.mark((function c(s){var a,o,i;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s.preventDefault(),a="Bearer "+sessionStorage.getItem("jwt"),o=s.target,i=new FormData(o),c.next=6,fetch("".concat(f,"/students/").concat(t,"/courses/").concat(n,"/assignments/").concat(r,"/studentfiles"),{method:"post",headers:{Authorization:a},body:i}).then((function(e){return e.json()})).then((function(t){"OK"===t.status?(alert("Success!",t.message,"success"),e.updateCallback()):alert("Error",t.message,"error")})).catch((function(e){return console.log(e)}));case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(c.jsxs)("form",{onSubmit:s,method:"post",encType:"multipart/form-data",children:[Object(c.jsx)("input",{name:"assignmentID",value:r,hidden:!0,type:"text",readOnly:!0}),Object(c.jsx)("input",{name:"file",type:"file"}),Object(c.jsx)("input",{type:"submit"})]})}function Q(e){var t=Object(r.useContext)(ve),n=Object(r.useContext)(ne),s=Object(r.useState)([]),a=Object(O.a)(s,2),o=a[0],i=a[1];return Object(r.useEffect)((function(){var e="Bearer "+sessionStorage.getItem("jwt");(function(){var c=Object(b.a)(h.a.mark((function c(){return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fetch("".concat(f,"/students/").concat(t,"/courses/").concat(n.id,"/attendance"),{headers:{Authorization:e}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?i(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 2:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}})()()}),[]),Object(c.jsx)("div",{className:"sessions",children:Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Week"}),Object(c.jsx)("th",{children:"Topic"}),Object(c.jsx)("th",{children:"Type"}),Object(c.jsx)("th",{children:"Date"}),Object(c.jsx)("th",{children:"Attended"})]})}),Object(c.jsx)("tbody",{children:o.map((function(e){return Object(c.jsx)(X,{session:e},e.id)}))})]})})}function X(e){var t=e.session;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t.week}),Object(c.jsx)("td",{children:t.topic}),Object(c.jsx)("td",{children:t.type}),Object(c.jsx)("td",{children:t.date}),Object(c.jsxs)("td",{children:[t.attended," / ",t.length]})]})}function Z(e){var t=e.grades;return Object(c.jsx)("div",{className:"student-grades",children:Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Grade"}),Object(c.jsx)("th",{children:"Comment"}),Object(c.jsx)("th",{children:"Date"})]})}),Object(c.jsx)("tbody",{children:t.map((function(e){return Object(c.jsx)(ee,{grade:e},e.id)}))})]})})}function ee(e){var t=e.grade;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t.grade}),Object(c.jsx)("td",{children:t.comment}),Object(c.jsx)("td",{children:t.date})]})}var te=function(e){var t=Object(r.useContext)(ne),n=Object(r.useContext)(ve),s=Object(r.useState)([]),a=Object(O.a)(s,2),o=a[0],i=a[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/students/").concat(n,"/courses/").concat(t.id,"/grades"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?i(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)(Z,{grades:o})},ne=s.a.createContext({});function ce(e){var t=Object(u.i)().url,n=Object(r.useContext)(ne),s=Object(r.useState)("home"),a=Object(O.a)(s,2),o=a[0],j=a[1];return Object(c.jsxs)("div",{className:"navbar",children:[Object(c.jsx)("h1",{children:n.name}),Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{className:"posts"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(t,"/posts"),onClick:function(){return j("posts")},children:"Posts"})}),Object(c.jsx)("li",{className:"assignments"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(t,"/assignments"),onClick:function(){return j("assignments")},children:"Assignments"})}),Object(c.jsx)("li",{className:"files"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(t,"/files"),onClick:function(){return j("files")},children:"Files"})}),Object(c.jsx)("li",{className:"grades"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(t,"/grades"),onClick:function(){return j("grades")},children:"Grades"})}),Object(c.jsx)("li",{className:"attendance"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(t,"/attendance"),onClick:function(){return j("attendance")},children:"Attendance"})})]})]})}var re=function(e){var t=Object(r.useContext)(ve),n=Object(u.h)().courseId,s=Object(u.i)(),a=s.path,o=s.url,i=Object(r.useState)({}),j=Object(O.a)(i,2),l=j[0],d=j[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/students/").concat(t,"/courses/").concat(n),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?d(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,n]),Object(c.jsx)(ne.Provider,{value:l,children:Object(c.jsxs)("div",{className:"course",children:[Object(c.jsx)(ce,{}),Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{exact:!0,path:"".concat(a,"/"),children:Object(c.jsx)(u.a,{to:"".concat(o,"/posts")})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(a,"/posts"),children:Object(c.jsx)(R,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(a,"/attendance"),children:Object(c.jsx)(Q,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(a,"/assignments"),children:Object(c.jsx)(Y,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(a,"/assignments/:assignmentId"),children:Object(c.jsx)(V,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(a,"/files"),children:Object(c.jsx)(F,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(a,"/grades"),children:Object(c.jsx)(te,{})})]})]})})};function se(e){var t=Object(r.useContext)(ve),n=Object(r.useState)([]),s=Object(O.a)(n,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,e.next=4,fetch("".concat(f,"/students/").concat(t,"/courses"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?o(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)("div",{className:"courses-list",children:Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{}),Object(c.jsx)("th",{children:"COURSE"}),Object(c.jsx)("th",{children:"CATEGORY"}),Object(c.jsx)("th",{children:"HOURS PER WEEK"}),Object(c.jsx)("th",{children:"TEACHER"}),Object(c.jsx)("th",{children:"LAST GRADE"}),Object(c.jsx)("th",{})]})}),Object(c.jsx)("tbody",{children:a.map((function(e){return Object(c.jsx)(ae,{course:e},e.id)}))})]})})}var ae=function(e){var t=Object(u.i)().url,n=Object(r.useContext)(ve),s=Object(r.useState)(0),a=Object(O.a)(s,2),o=a[0],j=a[1],l=Object(r.useState)(null),d=Object(O.a)(l,2),m=d[0],x=d[1];return Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(h.a.mark((function t(){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="Bearer "+sessionStorage.getItem("jwt"),t.next=3,fetch("".concat(f,"/students/").concat(n,"/courses/").concat(e.course.id,"/hours"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?j(e.result):console.log(e.message)})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var t=Object(b.a)(h.a.mark((function t(){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="Bearer "+sessionStorage.getItem("jwt"),t.next=3,fetch("".concat(f,"/students/").concat(n,"/courses/").concat(e.course.id,"/lastgrade"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?x(e.result):console.log(e.message)})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(),c()}),[n,e.course.id]),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"color",children:Object(c.jsx)("div",{style:{backgroundColor:D(e.course.id)}})}),Object(c.jsx)("td",{className:"name",children:e.course.name}),Object(c.jsx)("td",{className:"category",children:e.course.category}),Object(c.jsx)("td",{className:"hours",children:o}),Object(c.jsx)("td",{className:"teacher",children:e.course.teacher}),Object(c.jsx)("td",{className:"grade",children:m||"No grades yet"}),Object(c.jsx)("td",{children:Object(c.jsx)(i.b,{to:"".concat(t,"/").concat(e.course.id),children:"View"})})]})},oe=function(e){var t=Object(u.i)().path;return Object(c.jsxs)("div",{className:"courses-page",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Courses"})}),Object(c.jsx)("section",{children:Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{exact:!0,path:"".concat(t,"/"),children:Object(c.jsx)(se,{})}),Object(c.jsx)(u.b,{path:"".concat(t,"/:courseId"),children:Object(c.jsx)(re,{})})]})})]})};var ie=function(e){var t=Object(r.useContext)(ve),n=Object(r.useState)({firstname:"",lastname:"",email:"",address:"",phone:""}),s=Object(O.a)(n,2),a=s[0],o=s[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,e.next=4,fetch("".concat(f,"/students/").concat(t),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?o(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var i=function(e){e.preventDefault();var t=e.target,n=t.name,c=t.value;"firstname"!==n&&"lastname"!==n||C(c)?o(Object(l.a)(Object(l.a)({},a),{},Object(j.a)({},n,c))):alert("Error","The firstname and lastname fields should only containt letters, and be no longer than 30 characters","error")},u=function(){var e=Object(b.a)(h.a.mark((function e(n){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),w(a.email)){e.next=6;break}return alert("Error","Invalid email","error"),e.abrupt("return");case 6:if(N(a.phone)){e.next=9;break}return alert("Error","Invalid phone number","error"),e.abrupt("return");case 9:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=13,fetch("".concat(f,"/students/").concat(t),{method:"put",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return e})).then((function(e){return"OK"===e.status?e.result:null})).then((function(e){if(!e)throw new Error("Student could not update due to an internal error");1===e.affectedRows?alert("Success","Student updated successfully","success"):alert("Error","Something went wrong, pleasy try again","error")})).catch((function(e){return console.log(e.message)}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"user-form",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Your Information"})}),Object(c.jsxs)("section",{children:[Object(c.jsx)("h2",{children:"Update profile info"}),Object(c.jsxs)("form",{className:"student-form",onSubmit:u,children:[Object(c.jsxs)("label",{children:["Firstname:",Object(c.jsx)("input",{onChange:i,name:"firstname",value:a.firstname})]}),Object(c.jsxs)("label",{children:["Lastname:",Object(c.jsx)("input",{onChange:i,name:"lastname",value:a.lastname})]}),Object(c.jsxs)("label",{children:["Email:",Object(c.jsx)("input",{type:"email",onChange:i,name:"email",value:a.email})]}),Object(c.jsxs)("label",{children:["Address:",Object(c.jsx)("input",{onChange:i,name:"address",value:a.address})]}),Object(c.jsxs)("label",{children:["Phone number:",Object(c.jsx)("input",{onChange:i,name:"phone",value:a.phone})]}),Object(c.jsx)("button",{children:"Update"})]})]})]})},ue=2,je=200,le=function(e,t){var n=e.split(":"),c=Object(O.a)(n,2),r=c[0],s=c[1],a=t.split(":"),o=Object(O.a)(a,2),i=o[0],u=o[1];return 60*(parseInt(i)-parseInt(r))+(parseInt(u)-parseInt(s))},de=function(){for(var e=[],t=0;t<12;t++)e.push(Object(c.jsxs)("p",{children:[8+t,":00"]}));return Object(c.jsx)("div",{className:"timeline",children:e})},he=function(e){for(var t=[],n={width:je,height:60*ue-1},r=0;r<12;r++)t.push(Object(c.jsx)("div",{className:"block",style:n}));var s="";return e.last&&(s="last"),Object(c.jsxs)("div",{className:"day ".concat(s),children:[t,e.day.hours.map((function(e){return Object(c.jsx)(be,{hour:e},e.id)}))]})},be=function(e){var t=e.hour,n=t.start.split(":"),r=t.end.split(":"),s={width:je-60,height:le(t.start,t.end)*ue,top:le("8:00",t.start)*ue,left:30,right:30,backgroundColor:D(t.courseInstanceID),color:"#000"};return Object(c.jsxs)("div",{className:"hour",style:s,children:[Object(c.jsx)("p",{children:t.course_name}),Object(c.jsxs)("p",{children:["".concat(n[0],":").concat(n[1])," - ","".concat(r[0],":").concat(r[1])]})]})},Oe=function(e){var t=e.days;return Object(c.jsxs)("div",{className:"schedule",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Schedule"})}),Object(c.jsxs)("section",{children:[Object(c.jsx)(de,{}),t.map((function(e,n){return Object(c.jsxs)("div",{className:"day-container",children:[Object(c.jsx)("h4",{children:e.name}),Object(c.jsx)(he,{day:e,last:n===t.length-1})]})}))]})]})},fe=function(){var e=Object(r.useContext)(ve),t=Object(r.useState)([]),n=Object(O.a)(t,2),s=n[0],a=n[1];return Object(r.useEffect)((function(){(function(){var t=Object(b.a)(h.a.mark((function t(){var n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,t.next=4,fetch("".concat(f,"/students/").concat(e,"/schedule"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){if("OK"===e.status){var t=S(e.result);a(t)}else alert("Error",e.message||"An error occured!","error")})).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(Oe,{days:s})})};function me(e){var t=e.student,n=Object(u.g)(),r=Object(u.i)().url;return Object(c.jsxs)("div",{className:"profile",children:[Object(c.jsxs)("div",{className:"head",children:[Object(c.jsx)("h3",{children:"Profile information"}),Object(c.jsx)("button",{onClick:function(){return n.push("".concat(r,"/profile"))},children:"Update"})]}),Object(c.jsxs)("div",{className:"labels",children:[Object(c.jsx)("p",{children:"Firstname: "}),Object(c.jsx)("p",{children:"Lastname: "}),Object(c.jsx)("p",{children:"Email: "}),Object(c.jsx)("p",{children:"Address: "}),Object(c.jsx)("p",{children:"Phone Number: "}),Object(c.jsx)("p",{children:"Age: "}),Object(c.jsx)("p",{children:"Gender: "}),Object(c.jsx)("p",{children:"Nationality: "})]}),Object(c.jsxs)("div",{className:"values",children:[Object(c.jsx)("p",{children:t.firstname}),Object(c.jsx)("p",{children:t.lastname}),Object(c.jsx)("p",{children:t.email}),Object(c.jsx)("p",{children:t.address}),Object(c.jsx)("p",{children:t.phone}),Object(c.jsx)("p",{children:t.age}),Object(c.jsx)("p",{children:t.gender}),Object(c.jsx)("p",{children:t.nationality})]})]})}var xe=function(){var e=Object(r.useContext)(ve),t=function(){var t=Object(b.a)(h.a.mark((function t(n){var c,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c="Bearer "+sessionStorage.getItem("jwt"),r=n.target,s=new FormData(r),t.next=6,fetch("".concat(f,"/students/").concat(e,"/picture"),{method:"post",headers:{Authorization:c},body:s}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Update the profile picture"}),Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsx)("input",{type:"file",name:"file"}),Object(c.jsx)("input",{type:"submit",value:"Update"})]})]})},pe=function(){var e=Object(r.useContext)(ve),t=Object(u.g)(),n=Object(r.useState)({firstname:"",lastname:"",email:"",address:"",phone:"",age:0,gender:"",nationality:"",password:""}),s=Object(O.a)(n,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){var n="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/students/").concat(e),{headers:{Authorization:n}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?o(e.result):(alert("Error",e.message,"error"),t.push("/"))})).catch((function(e){return console.log(e)}))}),[]),Object(c.jsxs)("div",{className:"settings",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Settings"})}),Object(c.jsxs)("section",{children:[Object(c.jsx)(me,{student:a}),Object(c.jsx)(xe,{})]})]})},ve=s.a.createContext(null);var ge=function(){var e=Object(u.h)().id,t=Object(u.i)(),n=t.url,r=t.path;return Object(c.jsx)(ve.Provider,{value:e,children:Object(c.jsxs)("div",{className:"StudentPage",children:[Object(c.jsx)(x,{}),Object(c.jsx)("main",{children:Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{path:"".concat(r,"/courses"),children:Object(c.jsx)(oe,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(r,"/"),children:Object(c.jsx)(u.a,{to:"".concat(n,"/home")})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(r,"/home"),children:Object(c.jsx)(z,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(r,"/schedule"),children:Object(c.jsx)(fe,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(r,"/settings"),children:Object(c.jsx)(pe,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(r,"/settings/profile"),children:Object(c.jsx)(ie,{})})]})})]})})};function ye(){var e=Object(r.useContext)(St),t=Object(u.i)(),n=Object(u.g)(),s=Object(r.useState)("home"),a=Object(O.a)(s,2),o=a[0],j=a[1],l=Object(r.useState)(""),d=Object(O.a)(l,2),m=d[0],x=d[1];return Object(r.useEffect)((function(){(function(){var t=Object(b.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="Bearer "+sessionStorage.getItem("jwt"),t.next=3,fetch("".concat(f,"/teachers/").concat(e),{headers:{Authorization:n}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?x(e.result.firstname+" "+e.result.lastname):console.log(e.message)})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(c.jsxs)("div",{className:"sidenav",children:[Object(c.jsxs)("div",{className:"profile",children:[Object(c.jsx)("img",{src:"".concat(f,"/teachers/").concat(e,"/picture")}),Object(c.jsx)("h5",{children:m})]}),Object(c.jsxs)(i.b,{to:"".concat(t.url,"/home"),onClick:function(){return j("home")},className:"home"===o?"active":"",children:[Object(c.jsx)("i",{className:"material-icons",children:"home"}),Object(c.jsx)("p",{children:"Home"})]}),Object(c.jsxs)(i.b,{to:"".concat(t.url,"/class"),onClick:function(){return j("class")},className:"class"===o?"active":"",children:[Object(c.jsx)("i",{className:"material-icons",children:"face"}),Object(c.jsx)("p",{children:"My class"})]}),Object(c.jsxs)(i.b,{to:"".concat(t.url,"/courses"),onClick:function(){return j("courses")},className:"courses"===o?"active":"",children:[Object(c.jsx)("i",{className:"material-icons",children:"description"}),Object(c.jsx)("p",{children:"My Courses"})]}),Object(c.jsxs)(i.b,{to:"".concat(t.url,"/schedule"),onClick:function(){return j("schedule")},className:"schedule"===o?"active":"",children:[Object(c.jsx)("i",{className:"material-icons",children:"schedule"}),Object(c.jsx)("p",{children:"Schedule"})]}),Object(c.jsxs)(i.b,{to:"/",onClick:function(e){e.preventDefault(),sessionStorage.setItem("jwt",""),n.push("/")},className:"logout",children:[Object(c.jsx)("i",{className:"material-icons",children:"logout"}),Object(c.jsx)("p",{children:"Log out"})]})]})}function we(e){var t=e.post,n=e.updateList,s=Object(r.useContext)(ot),a=Object(r.useContext)(St),o=Object(r.useState)(!1),i=Object(O.a)(o,2),u=i[0],j=i[1],l=t.body.split("\n");return Object(c.jsxs)("div",{className:"post-item",children:[Object(c.jsxs)("div",{className:"header",children:[Object(c.jsxs)("div",{className:"header__title",children:[Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:t.author})}),Object(c.jsx)("p",{children:t.posted_on})]}),Object(c.jsxs)("div",{className:"header__actions",children:[Object(c.jsx)("i",{className:"material-icons header__actions__edit",onClick:function(){return j(!0)},children:"edit"}),Object(c.jsx)("i",{className:"material-icons header__actions__delete",onClick:function(e){e.preventDefault();var c="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(a,"/courses/").concat(s.id,"/posts/").concat(t.id),{method:"delete",headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(alert("Success",e.message,"success"),n()):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}))},children:"delete"})]})]}),Object(c.jsxs)("div",{className:"body",children:[Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:t.title})}),l.map((function(e){return Object(c.jsx)("p",{children:e})}))]}),Object(c.jsx)(Ce,{postId:t.id}),u?Object(c.jsx)(Ne,{post:t,close:function(){return j(!1)},updateList:n}):null]})}var Ce=function(e){var t=e.postId,n=Object(r.useContext)(St),s=Object(r.useContext)(ot),a=Object(r.useState)(0),o=Object(O.a)(a,2),i=o[0],u=o[1],j=Object(r.useState)([]),l=Object(O.a)(j,2),d=l[0],h=l[1];return Object(r.useEffect)((function(){var e="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(s.id,"/posts/").concat(t,"/comments"),{headers:{Authorization:e}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?h(e.result):console.log(e.message)})).catch((function(e){return console.log(e)}))}),[n,s.id,t,i]),Object(c.jsx)(K.Provider,{value:{postId:t,updateList:function(){return u(i+1)},deleteCommentUrl:"".concat(f,"/teachers/").concat(n,"/courses/").concat(s.id,"/posts/").concat(t,"/comments"),postCommentUrl:"".concat(f,"/teachers/").concat(n,"/courses/").concat(s.id,"/posts/").concat(t,"/comments"),courseId:s.id,userId:n,userType:"teacher"},children:Object(c.jsx)(T,{postId:t,comments:d})})},Ne=function(e){var t=Object(r.useContext)(St),n=Object(r.useContext)(ot),s=Object(r.useState)(Object(l.a)({},e.post)),a=Object(O.a)(s,2),o=a[0],i=a[1],u=function(e){e.preventDefault();var t=e.target,n=t.name,c=t.value;i(Object(l.a)(Object(l.a)({},o),{},Object(j.a)({},n,c)))};return Object(c.jsx)("div",{className:"modify-post",children:Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault();var r="Bearer "+sessionStorage.getItem("jwt"),s={title:o.title,body:o.body};fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/posts/").concat(o.id),{method:"put",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(t){"OK"===t.status?(e.updateList(o),alert("Success!",t.message,"success")):alert("Error",t.message,"error"),e.close()})).catch((function(e){return console.log(e)}))},children:[Object(c.jsxs)("label",{children:["Title",Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",onChange:u,name:"title",placeholder:"Post title",value:o.title})]}),Object(c.jsxs)("label",{children:["Body",Object(c.jsx)("br",{}),Object(c.jsx)("textarea",{onChange:u,name:"body",rows:"10",cols:"30",placeholder:"Post body",value:o.body})]}),Object(c.jsx)("button",{type:"submit",children:"Modify Post"}),Object(c.jsx)("button",{onClick:function(t){t.preventDefault(),e.close()},children:"Cancel"})]})})};function Se(e){var t=e.updateCallback,n=Object(r.useContext)(St),s=Object(r.useContext)(ot),a=Object(r.useState)(!1),o=Object(O.a)(a,2),i=o[0],u=o[1],d=Object(r.useState)({title:"",body:""}),m=Object(O.a)(d,2),x=m[0],p=m[1],v=function(e){e.preventDefault();var t=e.target,n=t.name,c=t.value;"title"===n&&c.length>100?alert("Error","The title is too long","error"):p(Object(l.a)(Object(l.a)({},x),{},Object(j.a)({},n,c)))},g=function(){var e=Object(b.a)(h.a.mark((function e(c){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),r=sessionStorage.getItem("jwt"),a="Bearer "+r,o={title:x.title,body:x.body},e.next=6,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(s.id,"/posts"),{method:"post",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(alert("Success","Post added successfully!","success"),t(),u(!1)):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"post-form",children:[Object(c.jsx)("button",{onClick:function(){return u(!0)},className:i?"hidden":"shown",children:"Post"}),Object(c.jsxs)("form",{onSubmit:g,className:i?"shown":"hidden",children:[Object(c.jsxs)("label",{children:["Title",Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",onChange:v,name:"title",placeholder:"Post title",value:x.title})]}),Object(c.jsxs)("label",{children:["Body",Object(c.jsx)("br",{}),Object(c.jsx)("textarea",{onChange:v,name:"body",rows:"10",cols:"30",placeholder:"Post body",value:x.body})]}),Object(c.jsx)("button",{type:"submit",children:"Add post"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),u(!1)},children:"Cancel"})]})]})}var Ie=function(e){var t=Object(r.useContext)(ot),n=Object(r.useContext)(St),s=Object(r.useState)(0),a=Object(O.a)(s,2),o=a[0],i=a[1],u=Object(r.useState)([]),j=Object(O.a)(u,2),l=j[0],d=j[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(t.id,"/posts"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?d(e.result):alert("Error",e.message,"error")}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o,t.id,n]);var m=function(){return i(o+1)};return Object(c.jsxs)("div",{className:"post-list",children:[Object(c.jsx)(Se,{updateCallback:m}),l.map((function(e){return Object(c.jsx)(we,{post:e,updateList:m},e.id)}))]})};function ke(e){var t=e.file,n=e.updateList,s=t.filename.replace(/-\d{7,}/,""),a=t.courseInstanceID,o=Object(r.useContext)(St);return Object(c.jsxs)("li",{id:t.id,children:[Object(c.jsx)("p",{children:s}),Object(c.jsxs)("div",{className:"actions",children:[Object(c.jsx)("i",{className:"material-icons download",onClick:function(e){e.preventDefault(),window.open("".concat(f,"/teachers/").concat(o,"/courses/").concat(a,"/files/").concat(t.filename),"_blank")},children:"download"}),Object(c.jsx)("i",{className:"material-icons delete",onClick:function(e){e.preventDefault();var c="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(o,"/courses/").concat(a,"/files/").concat(t.id),{method:"delete",headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error",e.message,"error"),n()})).catch((function(e){return console.log(e)}))},children:"delete"})]})]})}function Ee(e){var t=Object(r.useContext)(St),n=e.courseId,s=function(){var c=Object(b.a)(h.a.mark((function c(r){var s,a,o;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r.preventDefault(),s="Bearer "+sessionStorage.getItem("jwt"),a=r.target,o=new FormData(a),c.next=6,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n,"/files"),{method:"post",body:o,headers:{Authorization:s}}).then((function(e){return e.json()})).then((function(t){"OK"===t.status?alert("Success!",t.message,"success"):alert("Error",t.message,"error"),e.updateList()})).catch((function(e){return console.log(e)}));case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"file-form",children:Object(c.jsxs)("form",{onSubmit:s,method:"post",encType:"multipart/form-data",children:[Object(c.jsx)("input",{type:"file",name:"file"}),Object(c.jsx)("input",{type:"submit",value:"Upload"})]})})}var De=function(e){var t=Object(r.useContext)(St),n=Object(r.useContext)(ot),s=Object(r.useState)(0),a=Object(O.a)(s,2),o=a[0],i=a[1],u=Object(r.useState)([]),j=Object(O.a)(u,2),l=j[0],d=j[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=sessionStorage.getItem("jwt"),r="Bearer "+c,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/files"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?d(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,n.id,o]);var m=function(){return i(o+1)};return Object(c.jsxs)("div",{className:"file-list",children:[Object(c.jsx)(Ee,{updateList:m,classInstanceId:n.classInstanceID,courseId:n.id}),Object(c.jsx)("ul",{children:l.map((function(e){return Object(c.jsx)(ke,{updateList:m,file:e},e.id)}))})]})};function _e(e){var t=Object(r.useContext)(St),n=Object(r.useContext)(ot),s=Object(r.useState)(0),a=Object(O.a)(s,2),o=a[0],i=a[1],u=Object(r.useState)([]),j=Object(O.a)(u,2),l=j[0],d=j[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/assignments"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?d(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,n.id,o]);var m=function(){return i(o+1)};return Object(c.jsxs)("div",{className:"assignment-list",children:[Object(c.jsx)(ze,{updateCallback:m}),l.map((function(e){return Object(c.jsx)(Ae,{assignment:e,updateList:m},e.id)}))]})}function Ae(e){var t=e.assignment,n=e.updateList,s=Object(r.useContext)(St),a=Object(u.i)().url,o=Object(r.useState)(!1),j=Object(O.a)(o,2),l=j[0],d=j[1];return Object(c.jsxs)("div",{className:"assignment",children:[Object(c.jsxs)("div",{className:"title",children:[Object(c.jsx)("i",{className:"material-icons",children:"folder"}),Object(c.jsx)(i.b,{to:"".concat(a,"/").concat(t.id),children:t.title})]}),Object(c.jsxs)("div",{className:"actions",children:[Object(c.jsxs)("p",{children:["Due ",t.due]}),Object(c.jsx)("i",{className:"material-icons actions__edit",onClick:function(){return d(!0)},children:"edit"}),Object(c.jsx)("i",{className:"material-icons actions__delete",onClick:function(){var e="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(s,"/courses/").concat(t.courseInstanceID,"/assignments/").concat(t.id),{method:"delete",headers:{Authorization:e}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(n(),alert("Success!",e.message,"success")):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}))},children:"delete"})]}),l?Object(c.jsx)(Be,{updateList:n,assignment:t,close:function(){return d(!1)}}):null]})}function Be(e){var t=e.assignment,n=e.close,s=e.updateList,a=Object(r.useContext)(St),o=Object(r.useState)({title:t.title,description:t.description,due:t.due}),i=Object(O.a)(o,2),u=i[0],d=i[1],h=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;"title"===t&&n.length>100?alert("Error","Title is too long!","error"):d(Object(l.a)(Object(l.a)({},u),{},Object(j.a)({},t,n)))};return Object(c.jsx)("div",{className:"assignment__modify",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(a,"/courses/").concat(t.courseInstanceID,"/assignments/").concat(t.id),{method:"put",headers:{Authorization:c,"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(alert("Success!",e.message,"success"),s()):alert("Error",e.message,"error"),n()})).catch((function(e){return console.log(e)}))},children:[Object(c.jsxs)("label",{children:["Title",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"title",value:u.title,onChange:h,type:"text"})]}),Object(c.jsxs)("label",{children:["Description",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"description",value:u.description,onChange:h,type:"text"})]}),Object(c.jsxs)("label",{children:["Due",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"due",value:u.due,onChange:h,type:"datetime-local"})]}),Object(c.jsx)("button",{children:"Modify assignment"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),n()},children:"Cancel"})]})})}function ze(e){var t=Object(r.useContext)(St),n=Object(r.useContext)(ot),s=Object(r.useState)({title:"",description:"",due:""}),a=Object(O.a)(s,2),o=a[0],i=a[1],u=Object(r.useState)(!1),d=Object(O.a)(u,2),m=d[0],x=d[1],p=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;"title"===t&&n.length>100?alert("Error","Title is too long!","error"):i(Object(l.a)(Object(l.a)({},o),{},Object(j.a)({},t,n)))},v=function(){var c=Object(b.a)(h.a.mark((function c(r){var s,a;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r.preventDefault(),s=sessionStorage.getItem("jwt"),a="Bearer "+s,c.next=5,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/assignments"),{method:"post",headers:{Authorization:a,"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(t){"OK"===t.status?(alert("Success","Assignment added successfully!","success"),e.updateCallback()):alert("Error","Could not add assignment!","error")})).catch((function(e){return console.log(e)}));case 5:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"assignment-form",children:[Object(c.jsx)("button",{className:m?"hidden":"shown",onClick:function(){return x(!0)},children:"Add assignment"}),Object(c.jsxs)("form",{onSubmit:v,className:m?"shown":"hidden",children:[Object(c.jsxs)("label",{children:["Title",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"title",value:o.title,onChange:p,type:"text"})]}),Object(c.jsxs)("label",{children:["Description",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"description",value:o.description,onChange:p,type:"text"})]}),Object(c.jsxs)("label",{children:["Due",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"due",value:o.due,onChange:p,type:"datetime-local"})]}),Object(c.jsx)("button",{children:"Add assignment"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),x(!1)},children:"Cancel"})]})]})}function Ke(e){var t=Object(r.useContext)(St),n=Object(r.useContext)(ot),s=Object(u.h)().assignmentId,a=Object(r.useState)(0),o=Object(O.a)(a,2),i=o[0],j=o[1],l=Object(r.useState)(null),d=Object(O.a)(l,2),m=d[0],x=d[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/assignments/").concat(s),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?x(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i,t,n.id]);var p=Object(r.useState)([]),v=Object(O.a)(p,2),g=v[0],y=v[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/assignments/").concat(s,"/files"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?y(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]);var w=function(){return j(i+1)};return Object(c.jsxs)("div",{className:"assignment",children:[Object(c.jsx)("h2",{children:m?m.title:"title"}),Object(c.jsx)("p",{children:m?m.description:"description"}),Object(c.jsxs)("div",{className:"files",children:[Object(c.jsxs)("div",{className:"file-list",children:[Object(c.jsx)("h4",{children:"Assignment files"}),Object(c.jsx)(Ue,{updateCallback:w,courseInstanceId:n.id,assignmentId:s,classInstanceId:n.classInstanceID}),Object(c.jsx)("ul",{children:g.map((function(e){return Object(c.jsx)(Te,{updateList:w,file:e})}))})]}),Object(c.jsxs)("div",{className:"student-files",children:[Object(c.jsx)("h4",{children:"Student files"}),Object(c.jsx)(Le,{courseId:n.id,teacherId:t,assignmentId:s})]})]})]})}var Te=function(e){var t=e.file,n=e.updateList,s=t.filename.replace(/-\d{7,}/,""),a=t.courseInstanceID,o=Object(r.useContext)(St);return Object(c.jsxs)("li",{id:t.id,children:[Object(c.jsx)("p",{children:s}),Object(c.jsxs)("div",{className:"actions",children:[Object(c.jsx)("i",{className:"material-icons",onClick:function(e){e.preventDefault(),window.open("".concat(f,"/teachers/").concat(o,"/courses/").concat(a,"/files/").concat(t.filename),"_blank")},children:"download"}),Object(c.jsx)("i",{className:"material-icons",onClick:function(e){e.preventDefault();var c="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(o,"/courses/").concat(a,"/files/").concat(t.id),{method:"delete",headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error",e.message,"error"),n()})).catch((function(e){return console.log(e)}))},children:"delete"})]})]})};function Le(e){var t=e.courseId,n=e.teacherId,s=e.assignmentId,a=Object(r.useState)([]),o=Object(O.a)(a,2),i=o[0],u=o[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(t,"/assignments/").concat(s,"/studentfiles"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?u(k(e.result)):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)("div",{className:"student-files",children:i.map((function(e){return Object(c.jsx)(Ge,{student:e},e.id)}))})}function Ge(e){var t=e.student,n=t.firstname,s=t.lastname,a=t.files,o=Object(r.useState)(!1),i=Object(O.a)(o,2),u=i[0],j=i[1];return Object(c.jsxs)("div",{className:"student",children:[Object(c.jsxs)("div",{className:"head",onClick:function(){return j(!u)},children:[Object(c.jsx)("h4",{children:n+" "+s}),Object(c.jsx)("i",{className:"material-icons",children:"unfold_more"})]}),Object(c.jsx)("div",{className:"body",children:Object(c.jsx)("div",{className:"file-list "+(u?"shown":"hidden"),children:Object(c.jsx)("ul",{children:a.map((function(e){return Object(c.jsx)(Pe,{file:e},e.id)}))})})})]})}function Pe(e){var t=e.file,n=Object(r.useContext)(St),s=t.filename.replace(/-\d{7,}/,""),a=t.assignmentID,o=t.studentID,i=t.courseInstanceID;return Object(c.jsxs)("li",{id:t.id,children:[Object(c.jsx)("p",{className:"filename",children:s}),Object(c.jsx)("p",{className:"datetime",children:t.posted_on}),Object(c.jsx)("i",{className:"material-icons",onClick:function(e){e.preventDefault(),window.open("".concat(f,"/teachers/").concat(n,"/courses/").concat(i,"/assignments/").concat(a,"/studentfiles/").concat(o,"/").concat(t.filename),"_blank")},children:"download"})]})}function Ue(e){var t=Object(r.useContext)(St),n=e.assignmentId,s=e.courseInstanceId,a=function(){var c=Object(b.a)(h.a.mark((function c(r){var a,o,i;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r.preventDefault(),a="Bearer "+sessionStorage.getItem("jwt"),o=r.target,i=new FormData(o),c.next=6,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(s,"/assignments/").concat(n,"/files"),{method:"post",body:i,headers:{Authorization:a}}).then((function(e){return e.json()})).then((function(t){"OK"===t.status?alert("Success!",t.message,"success"):alert("Error",t.message,"error"),e.updateCallback()})).catch((function(e){return console.log(e)}));case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"file-form",children:Object(c.jsxs)("form",{onSubmit:a,method:"post",encType:"multipart/form-data",children:[Object(c.jsx)("input",{name:"assignmentID",value:n,hidden:!0,type:"text",readOnly:!0}),Object(c.jsx)("input",{name:"file",type:"file"}),Object(c.jsx)("input",{type:"submit"})]})})}function Je(e){var t=Object(u.g)(),n=e.session;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:n.week}),Object(c.jsx)("td",{children:n.topic}),Object(c.jsx)("td",{children:n.type}),Object(c.jsx)("td",{children:n.date}),Object(c.jsx)("td",{children:n.total}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){t.push("attendance/".concat(n.id))},children:"VIEW"})})]})}var Me=function(e){var t=Object(r.useContext)(St),n=Object(r.useContext)(ot),s=Object(u.i)().url,a=Object(r.useState)([]),o=Object(O.a)(a,2),j=o[0],l=o[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/attendance"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?l(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,n.id]),Object(c.jsxs)("div",{className:"sessions",children:[Object(c.jsx)(i.b,{to:"".concat(s,"/add"),children:"Add Session"}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Week"}),Object(c.jsx)("th",{children:"Topic"}),Object(c.jsx)("th",{children:"Type"}),Object(c.jsx)("th",{children:"Date"}),Object(c.jsx)("th",{children:"Hours"}),Object(c.jsx)("th",{})]})}),Object(c.jsx)("tbody",{children:j.map((function(e){return Object(c.jsx)(Je,{session:e},e.id)}))})]})]})};function Re(e){var t=Object(r.useContext)(St),n=Object(r.useContext)(ot),s=Object(u.h)().sessionId,a=Object(r.useState)(e.student),o=Object(O.a)(a,2),i=o[0],j=o[1],d=function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.attended!=i.total){e.next=3;break}return alert("Error","You cannot increase any more!","error"),e.abrupt("return");case 3:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=7,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/attendance/").concat(s,"/").concat(i.id),{method:"post",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify({length:i.attended+1})}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error",e.message,"error"),j(Object(l.a)(Object(l.a)({},i),{},{attended:i.attended+1}))}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=i.attended){e.next=3;break}return alert("Error","You cannot decrease any more!","error"),e.abrupt("return");case 3:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=7,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/attendance/").concat(s,"/").concat(i.id),{method:"post",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify({length:i.attended-1})}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error",e.message,"error"),j(Object(l.a)(Object(l.a)({},i),{},{attended:i.attended-1}))}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:i.firstname}),Object(c.jsx)("td",{children:i.lastname}),Object(c.jsx)("td",{children:i.attended+" / "+i.total}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:m,children:Object(c.jsx)("i",{className:"material-icons",children:"remove"})})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:d,children:Object(c.jsx)("i",{className:"material-icons",children:"add"})})})]})}var Fe=function(e){var t=Object(r.useContext)(St),n=Object(r.useContext)(ot),s=Object(u.h)().sessionId,a=Object(r.useState)([]),o=Object(O.a)(a,2),i=o[0],j=o[1],l=Object(u.g)();Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=sessionStorage.getItem("jwt"),r="Bearer "+c,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/attendance/").concat(s),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?j(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(c.jsxs)("div",{className:"session",children:[Object(c.jsx)("button",{className:"delete",onClick:function(e){e.preventDefault();var c="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n.id,"/attendance/").concat(s),{method:"delete",headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error",e.message,"error"),l.goBack()})).catch((function(e){return console.log(e)}))},children:"Delete this session"}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Firstname"}),Object(c.jsx)("th",{children:"Lastname"}),Object(c.jsx)("th",{children:"Attended"}),Object(c.jsx)("th",{}),Object(c.jsx)("th",{})]})}),Object(c.jsx)("tbody",{children:i.map((function(e){return Object(c.jsx)(Re,{student:e},e.id)}))})]})]})},He=n(18);function Ye(e){var t=e.student,n=e.callback;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t.id}),Object(c.jsx)("td",{children:t.firstname}),Object(c.jsx)("td",{children:t.lastname}),Object(c.jsx)("td",{children:"NaN"!==typeof e.length?e.length:"Invalid"}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){return n(-1)},children:Object(c.jsx)("i",{className:"material-icons",children:"remove"})})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){return n(1)},children:Object(c.jsx)("i",{className:"material-icons",children:"add"})})})]})}var We=function(e){var t=Object(r.useContext)(ot),n=Object(r.useContext)(St),s=Object(u.g)(),a=Object(r.useState)([]),o=Object(O.a)(a,2),i=o[0],d=o[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(t.id,"/students"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){if("OK"===e.status){var t=e.result;d(t);for(var n=[],c=0;c<t.length;c++)n[c]=1;C(n)}else alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var m=Object(r.useState)({week:0,topic:"",type:"lecture",length:1,date:""}),x=Object(O.a)(m,2),p=x[0],v=x[1],g=Object(r.useState)([]),y=Object(O.a)(g,2),w=y[0],C=y[1],N=function(e){e.preventDefault();var t,n=e.target,c=n.name;if("length"===c){if(t=n.value,!/^-?\d+$/.test(t)&&""!==t)return void alert("Error","It should be a number","error");if(parseInt(n.value)>10)return void alert("Error","To big of a length","error");for(var r=[],s=0;s<i.length;s++)r.push(parseInt(n.value));C(r)}v(Object(l.a)(Object(l.a)({},p),{},Object(j.a)({},c,n.value)))},S=function(){var e=Object(b.a)(h.a.mark((function e(c){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),!(""===p.topic||""===p.date||""===p.type||p.week<=0||p.length<=0||p.length>10)){e.next=4;break}return alert("Error","Your input is wrong","error"),e.abrupt("return");case 4:return r=sessionStorage.getItem("jwt"),s="Bearer "+r,e.next=8,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(t.id,"/attendance"),{method:"post",headers:{"Content-Type":"application/json",Authorization:s},body:JSON.stringify(p)}).then((function(e){return e.json()})).then((function(e){"OK"===e.status&&I(e.result.insertId)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(h.a.mark((function e(c){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.map((function(e,t){return{id:e.id,length:w[t]}})),a=sessionStorage.getItem("jwt"),o="Bearer "+a,e.next=5,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(t.id,"/attendance/").concat(c),{method:"post",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?e.result.affectedRows===i.length&&(alert("Success!","The session was successfully added","success"),s.push("/t/".concat(n,"/courses/").concat(t.id,"/attendance"))):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return function(t){var n=Object(He.a)(w),c=w[e]+t;c>p.length||c<0?alert("Error","Number not allowed","error"):(n[e]=c,C(n))}};return Object(c.jsxs)("div",{className:"add-session",children:[Object(c.jsxs)("label",{children:["Week:",Object(c.jsx)("input",{name:"week",placeholder:"week",type:"number",onChange:N,value:p.week})]}),Object(c.jsxs)("label",{children:["Topic:",Object(c.jsx)("input",{name:"topic",placeholder:"topic",onChange:N,value:p.topic})]}),Object(c.jsxs)("label",{children:["Type:",Object(c.jsxs)("select",{name:"type",placeholder:"Type",onChange:N,value:p.type,children:[Object(c.jsx)("option",{value:"lecture",children:"Lecture"}),Object(c.jsx)("option",{value:"seminar",children:"Seminar"})]})]}),Object(c.jsxs)("label",{children:["Length:",Object(c.jsx)("input",{name:"length",type:"number",placeholder:"length",onChange:N,value:p.length})]}),Object(c.jsxs)("label",{children:["Date:",Object(c.jsx)("input",{name:"date",placeholder:"week",type:"date",onChange:N,value:p.date})]}),Object(c.jsx)("button",{onClick:S,children:"Submit"}),Object(c.jsx)("div",{className:"horizontal-divider"}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Id"}),Object(c.jsx)("th",{children:"Firstname"}),Object(c.jsx)("th",{children:"Lastname"}),Object(c.jsx)("th",{children:"Attended"}),Object(c.jsx)("th",{}),Object(c.jsx)("th",{})]})}),Object(c.jsx)("tbody",{children:i.map((function(e,t){return Object(c.jsx)(Ye,{student:e,length:w[t],callback:k(t)},t)}))})]})]})};function Ve(e){var t=Object(r.useState)(!1),n=Object(O.a)(t,2),s=n[0],a=n[1];return Object(c.jsxs)("div",{className:"grades",children:[Object(c.jsxs)("div",{className:"head",onClick:function(){return a(!s)},children:[Object(c.jsx)("h4",{children:e.name}),Object(c.jsx)("i",{className:"material-icons",children:"unfold_more"})]}),Object(c.jsx)("div",{className:"body",children:Object(c.jsxs)("table",{className:s?"hidden":"shown",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Grade"}),Object(c.jsx)("th",{children:"Comment"}),Object(c.jsx)("th",{children:"Date"})]})}),Object(c.jsx)("tbody",{children:e.grades.map((function(e){return function(e){var t=Object(u.g)(),n=Object(u.i)().url,r=function(){t.push("".concat(n,"/").concat(e.id),e)};return Object(c.jsxs)("tr",{onClick:r,children:[Object(c.jsx)("td",{children:e.grade}),Object(c.jsx)("td",{children:e.comment}),Object(c.jsx)("td",{children:e.date})]},e.id)}(e)}))})]})})]})}var $e=function(e){var t=Object(r.useContext)(ot),n=Object(r.useContext)(St),s=Object(u.i)().url,a=Object(r.useState)([]),o=Object(O.a)(a,2),j=o[0],l=o[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sessionStorage.getItem("jwt"),s="Bearer "+r,e.next=4,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(t.id,"/grades"),{headers:{Authorization:s}}).then((function(e){return e.json()})).then((function(e){if("OK"===e.status){var t=I(e.result).map((function(e){return Object(c.jsx)(Ve,{name:e.firstname+" "+e.lastname,grades:e.grades},e.id)}));l(t)}else alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsxs)("div",{className:"student-list",children:[Object(c.jsxs)("div",{className:"action-buttons",children:[Object(c.jsx)(i.b,{to:"".concat(s,"/add"),children:"Add Grades"}),Object(c.jsx)(i.b,{to:"".concat(s,"/addsingle"),children:"Add Single Grade"}),Object(c.jsx)(i.b,{to:"".concat(s,"/delete"),children:"Delete test grades"})]}),j]})};var qe=function(e){var t=e.student,n=e.callback;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t.id}),Object(c.jsx)("td",{children:t.firstname}),Object(c.jsx)("td",{children:t.lastname}),Object(c.jsx)("td",{children:e.grade}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){return n(-1)},children:Object(c.jsx)("i",{className:"material-icons",children:"remove"})})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){return n(1)},children:Object(c.jsx)("i",{className:"material-icons",children:"add"})})})]})};function Qe(e){var t=Object(u.g)(),n=Object(r.useContext)(St),s=Object(r.useContext)(ot),a=Object(r.useState)({comment:"",date:"",studentId:-1,grade:4}),o=Object(O.a)(a,2),i=o[0],d=o[1],m=Object(r.useState)([]),x=Object(O.a)(m,2),p=x[0],v=x[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("jwt"),c="Bearer "+t,e.next=4,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(s.id,"/students"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(v(e.result),e.result.length>0&&d(Object(l.a)(Object(l.a)({},i),{},{studentId:e.result[0].id}))):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var g=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;"grade"===t&&(n>10||n<4)?alert("Error","Grade cannot be bigger than 10 or smaller than 4!","error"):d(Object(l.a)(Object(l.a)({},i),{},Object(j.a)({},t,n)))},y=function(){var e=Object(b.a)(h.a.mark((function e(c){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),""!==i.date&&""!==i.comment){e.next=4;break}return alert("Error","Either no comment or the date is not set!","error"),e.abrupt("return");case 4:return r={comment:i.comment,date:i.date,students:[{id:i.studentId,grade:i.grade}]},a=sessionStorage.getItem("jwt"),o="Bearer "+a,e.next=9,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(s.id,"/grades"),{method:"post",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?(alert("Success!",e.message,"success"),t.push("/t/".concat(n,"/courses/").concat(s.id,"/grades"))):alert("Error",e.message,"error")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"add-grades",children:[Object(c.jsxs)("label",{children:["Comment:",Object(c.jsx)("input",{onChange:g,value:i.comment,name:"comment",type:"text"})]}),Object(c.jsxs)("label",{children:["Date:",Object(c.jsx)("input",{onChange:g,value:i.date,name:"date",type:"date"})]}),Object(c.jsxs)("label",{children:["Select the student:",Object(c.jsx)("select",{onChange:g,value:i.studentId,name:"studentId",children:p.map((function(e){return Object(c.jsx)("option",{value:e.id,children:"".concat(e.firstname," ").concat(e.lastname)},e.id)}))})]}),Object(c.jsxs)("label",{children:["Select the grade:",Object(c.jsx)("input",{onChange:g,value:i.grade,name:"grade",type:"number",step:"1",min:4,max:10})]}),Object(c.jsx)("button",{onClick:y,children:"Submit"})]})}var Xe=function(e){var t=Object(r.useContext)(ot),n=Object(r.useContext)(St),s=Object(u.g)(),a=Object(r.useState)([]),o=Object(O.a)(a,2),i=o[0],d=o[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=4,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(t.id,"/students"),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){if("OK"===e.status){d(e.result);for(var t=[],n=0;n<e.result.length;n++)t.push(4);C(t)}else alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,t.id]);var m=Object(r.useState)({comment:"",date:""}),x=Object(O.a)(m,2),p=x[0],v=x[1],g=Object(r.useState)([]),y=Object(O.a)(g,2),w=y[0],C=y[1],N=function(e){var t=e.target,n=t.name;v(Object(l.a)(Object(l.a)({},p),{},Object(j.a)({},n,t.value))),e.preventDefault()},S=function(){var e=Object(b.a)(h.a.mark((function e(){var c,r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==p.comment&&""!==p.date){e.next=3;break}return alert("Error","Grade comment is empty!","error"),e.abrupt("return");case 3:return c=i.map((function(e,t){return{id:e.id,grade:w[t]}})),r={comment:p.comment,date:p.date,students:c},a=sessionStorage.getItem("jwt"),o="Bearer "+a,e.next=9,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(t.id,"/grades"),{method:"post",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?e.result.affectedRows===i.length&&(alert("Success!","Grades were added successfully","success"),s.push("/t/".concat(n,"/courses/").concat(t.id,"/grades"))):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){return function(t){var n=Object(He.a)(w);n[e]+=t,n[e]>10||n[e]<4?alert("Error","Not allowed!","error"):C(n)}};return Object(c.jsxs)("div",{className:"add-grades",children:[Object(c.jsxs)("label",{children:["Comment:",Object(c.jsx)("input",{name:"comment",type:"text",value:p.comment,onChange:N})]}),Object(c.jsxs)("label",{children:["Date:",Object(c.jsx)("input",{name:"date",type:"date",value:p.date,onChange:N})]}),Object(c.jsx)("button",{onClick:S,children:"Submit"}),Object(c.jsx)("div",{className:"horizontal-divider"}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Id"}),Object(c.jsx)("th",{children:"Firstname"}),Object(c.jsx)("th",{children:"Lastname"}),Object(c.jsx)("th",{children:"Grade"}),Object(c.jsx)("th",{}),Object(c.jsx)("th",{})]})}),Object(c.jsx)("tbody",{children:i.map((function(e,t){return Object(c.jsx)(qe,{student:e,grade:w[t],callback:I(t)},t)}))})]})]})},Ze=function(){var e=Object(r.useContext)(St),t=Object(r.useContext)(ot),n=Object(u.g)(),s=Object(r.useState)({id:0,grade:0,comment:"",date:""}),a=Object(O.a)(s,2),o=a[0],i=a[1];Object(r.useEffect)((function(){i(n.location.state)}),[]);var d=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;i(Object(l.a)(Object(l.a)({},o),{},Object(j.a)({},t,n)))};return Object(c.jsx)("div",{className:"update-grade",children:Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault();var r="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(e,"/courses/").concat(t.id,"/grades/").concat(o.id),{method:"put",headers:{Authorization:r,"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error!",e.message,"error"),n.goBack()})).catch((function(e){return console.log(e)}))},children:[Object(c.jsxs)("label",{children:["Grade:",Object(c.jsx)("input",{name:"grade",type:"number",value:o.grade,min:"4",max:"10",onChange:d})]}),Object(c.jsxs)("label",{children:["Comment:",Object(c.jsx)("input",{name:"comment",type:"text",value:o.comment,onChange:d})]}),Object(c.jsxs)("label",{children:["Date:",Object(c.jsx)("input",{name:"date",type:"date",value:o.date,onChange:d})]}),Object(c.jsx)("button",{children:"Update"}),Object(c.jsx)("button",{className:"delete",onClick:function(c){c.preventDefault();var r="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(e,"/courses/").concat(t.id,"/grades/").concat(o.id),{method:"delete",headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error",e.message,"error"),n.goBack()})).catch((function(e){return console.log(e)}))},children:"Delete"})]})})},et=function(){var e=Object(r.useContext)(St),t=Object(r.useContext)(ot),n=Object(u.g)(),s=Object(r.useState)(""),a=Object(O.a)(s,2),o=a[0],i=a[1];return Object(c.jsxs)("div",{className:"update-grade",children:[Object(c.jsx)("h3",{children:"Choose the date of the exam :"}),Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault();var r="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(e,"/courses/").concat(t.id,"/grades"),{method:"delete",headers:{Authorization:r,"Content-Type":"application/json"},body:JSON.stringify({date:o,classInstanceID:t.classInstanceID})}).then((function(e){return e.json()})).then((function(e){alert("Error",e.message,"error"),n.goBack()})).catch((function(e){return console.log(e)}))},children:[Object(c.jsxs)("label",{children:["Date:",Object(c.jsx)("input",{name:"date",type:"date",value:o,onChange:function(e){e.preventDefault(),i(e.target.value)}})]}),Object(c.jsx)("button",{children:"Delete"})]})]})},tt=[{name:"January",length:31},{name:"February",length:29},{name:"March",length:31},{name:"April",length:30},{name:"May",length:31},{name:"June",length:30},{name:"July",length:31},{name:"August",length:31},{name:"September",length:30},{name:"October",length:31},{name:"November",length:30},{name:"December",length:31}],nt=function(e){for(var t=[],n=0;n<tt[e.month-1].length;n++)t.push(n+1);return Object(c.jsxs)("div",{className:"student-row",children:[Object(c.jsx)("p",{children:"Days"}),t.map((function(e){return Object(c.jsx)("div",{className:"element",children:Object(c.jsx)("p",{children:e.toString()})})}))]})},ct=function(e){for(var t=Object(r.useContext)(St),n=e.courseInstanceId,s=[],a=0;a<tt[e.month-1].length;a++)s.push({id:0,mark:"",comment:"",date:"".concat(e.year,"-").concat(e.month,"-").concat(a+1),studentID:e.student.id,courseInstanceID:n});var o=Object(r.useState)([]),i=Object(O.a)(o,2),u=i[0],j=i[1];return Object(r.useEffect)((function(){j(s),function(){var c=Object(b.a)(h.a.mark((function c(){var r,a;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r="Bearer "+sessionStorage.getItem("jwt"),a="month=".concat(e.month,"&year=").concat(e.year,"&courseInstanceID=").concat(n),c.next=4,fetch("".concat(f,"/teachers/").concat(t,"/students/").concat(e.student.id,"/marks?").concat(a),{headers:{Authorization:r}}).then((function(e){return e.json()})).then((function(e){if("OK"===e.status){for(var t=[].concat(s),n=0;n<e.result.length;n++){t[parseInt(e.result[n].date.split("-")[2])-1]=e.result[n]}j(t)}else alert("Error",e.message,"error")})).catch((function(e){return console.log(e.message)}));case 4:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}()()}),[t,e.month,e.year]),Object(c.jsxs)("div",{className:"student-row",children:[Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:"".concat(e.student.firstname," ").concat(e.student.lastname)})}),u.map((function(e,n){return Object(c.jsx)(rt,{cell:e,teacherId:t},n)}))]})},rt=function(e){var t=Object(r.useState)({id:0,mark:"",comment:""}),n=Object(O.a)(t,2),s=n[0],a=n[1];Object(r.useEffect)((function(){a(e.cell)}),[e.cell]);var i=function(e,t,n){a({id:e,mark:t,comment:n})};return Object(c.jsx)("div",{className:"element",children:Object(c.jsx)("p",{onClick:function(){var t=Object(l.a)(Object(l.a)({},e.cell),{},{id:s.id,mark:s.mark,comment:s.comment}),n=document.getElementById("popup-container");o.a.render(Object(c.jsx)(st,{cell:t,teacherId:e.teacherId,updateMark:i}),n)},children:s.mark})})},st=function(e){var t=Object(r.useState)(e.cell),n=Object(O.a)(t,2),s=n[0],a=n[1],i=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;a(Object(l.a)(Object(l.a)({},s),{},Object(j.a)({},t,n)))},u=function(){var t=Object(b.a)(h.a.mark((function t(n){var c,r,a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r="",a="",i="Bearer "+sessionStorage.getItem("jwt"),0===s.id?(c={mark:s.mark,comment:s.comment,date:s.date,studentID:s.studentID,courseInstanceID:s.courseInstanceID},r="".concat(f,"/teachers/").concat(e.teacherId,"/students/").concat(s.studentID,"/marks"),a="post"):(c={mark:s.mark,comment:s.comment},r="".concat(f,"/teachers/").concat(e.teacherId,"/students/").concat(s.studentID,"/marks/").concat(e.cell.id),a="put"),t.next=7,fetch(r,{method:a,headers:{Authorization:i,"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(t){if("OK"===t.status){alert("Success","Mark added successfully!","success");var n=0===s.id?t.result.insertId:s.id;e.updateMark(n,s.mark,s.comment);var c=document.getElementById("popup-container");o.a.unmountComponentAtNode(c)}else alert(t.message)})).catch((function(e){return console.log(e)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(b.a)(h.a.mark((function t(n){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c="Bearer "+sessionStorage.getItem("jwt"),t.next=4,fetch("".concat(f,"/teachers/").concat(e.teacherId,"/students/").concat(s.studentID,"/marks/").concat(e.cell.id),{method:"delete",headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(t){if("OK"===t.status){alert("Success","Mark deleted successfully!","success"),e.updateMark(0,"","");var n=document.getElementById("popup-container");o.a.unmountComponentAtNode(n)}else alert("Error",t.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"popup",id:"popup",children:Object(c.jsxs)("form",{onSubmit:u,children:[Object(c.jsxs)("label",{children:["Mark:",Object(c.jsx)("input",{name:"mark",onChange:i,value:s.mark})]}),Object(c.jsxs)("label",{children:["Comment:",Object(c.jsx)("input",{name:"comment",onChange:i,value:s.comment})]}),Object(c.jsx)("button",{children:"Update"}),Object(c.jsx)("button",{className:"danger",onClick:d,children:"Delete"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault();var t=document.getElementById("popup-container");o.a.unmountComponentAtNode(t)},children:"Cancel"})]})})},at=function(){var e=Object(r.useState)({month:1,year:2021}),t=Object(O.a)(e,2),n=t[0],s=t[1],a=Object(r.useContext)(St),o=Object(r.useContext)(ot).id,i=Object(r.useState)([]),u=Object(O.a)(i,2),j=u[0],l=u[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Bearer "+sessionStorage.getItem("jwt"),e.next=3,fetch("".concat(f,"/teachers/").concat(a,"/courses/").concat(o,"/students"),{headers:{Authorization:t}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?l(e.result):alert("Error",e.message,"error")})).catch((function(e){return alert("Something went wrong")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);return Object(c.jsxs)("div",{className:"register",children:[Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("button",{onClick:function(){1===n.month?s({month:12,year:n.year-1}):s({month:n.month-1,year:n.year})},children:Object(c.jsx)("i",{className:"material-icons",children:"arrow_back_ios"})}),Object(c.jsx)("h2",{children:"".concat(tt[n.month-1].name," - ").concat(n.year)}),Object(c.jsx)("button",{onClick:function(){12===n.month?s({month:1,year:n.year+1}):s({month:n.month+1,year:n.year})},children:Object(c.jsx)("i",{className:"material-icons",children:"arrow_forward_ios"})})]}),Object(c.jsx)(nt,{month:n.month}),Object(c.jsx)("div",{children:j.map((function(e){return Object(c.jsx)(ct,{student:e,month:n.month,year:n.year,courseInstanceId:o},e.id)}))}),Object(c.jsx)("div",{id:"popup-container"})]})},ot=s.a.createContext({});function it(e){var t=Object(r.useContext)(ot),n=Object(u.i)().url,s=Object(r.useState)("posts"),a=Object(O.a)(s,2),o=a[0],j=a[1];return Object(c.jsxs)("div",{className:"navbar",children:[Object(c.jsx)("h1",{children:t.name}),Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{className:"posts"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(n,"/posts"),onClick:function(){return j("posts")},children:"Posts"})}),Object(c.jsx)("li",{className:"assignments"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(n,"/assignments"),onClick:function(){return j("assignments")},children:"Assignments"})}),Object(c.jsx)("li",{className:"files"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(n,"/files"),onClick:function(){return j("files")},children:"Files"})}),Object(c.jsx)("li",{className:"attendance"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(n,"/attendance"),onClick:function(){return j("attendance")},children:"Attendance"})}),Object(c.jsx)("li",{className:"grades"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(n,"/grades"),onClick:function(){return j("grades")},children:"Grades"})}),Object(c.jsx)("li",{className:"register"===o?"active":"",children:Object(c.jsx)(i.b,{to:"".concat(n,"/register"),onClick:function(){return j("register")},children:"Register"})})]})]})}var ut=function(e){var t=Object(r.useContext)(St),n=Object(u.h)().courseId,s=Object(u.i)(),a=s.url,o=s.path,i=Object(r.useState)({}),j=Object(O.a)(i,2),l=j[0],d=j[1];return Object(r.useEffect)((function(){var e="Bearer "+sessionStorage.getItem("jwt");(function(){var c=Object(b.a)(h.a.mark((function c(){return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n),{headers:{Authorization:e}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?d(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 2:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}})()()}),[t,n]),Object(c.jsx)(ot.Provider,{value:l,children:Object(c.jsxs)("div",{className:"course",children:[Object(c.jsx)(it,{courseId:n,teacherId:t}),Object(c.jsx)("div",{className:"course-tab",children:Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/"),children:Object(c.jsx)(u.a,{to:"".concat(a,"/posts")})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/posts"),children:Object(c.jsx)(Ie,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/assignments"),children:Object(c.jsx)(_e,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/assignments/:assignmentId"),children:Object(c.jsx)(Ke,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/files"),children:Object(c.jsx)(De,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/attendance"),children:Object(c.jsx)(Me,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/attendance/add"),children:Object(c.jsx)(We,{})}),Object(c.jsx)(u.b,{path:"".concat(o,"/attendance/:sessionId"),children:Object(c.jsx)(Fe,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/register"),children:Object(c.jsx)(at,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/grades"),children:Object(c.jsx)($e,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/grades/add"),children:Object(c.jsx)(Xe,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/grades/addsingle"),children:Object(c.jsx)(Qe,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/grades/delete"),children:Object(c.jsx)(et,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(o,"/grades/:gradeId"),children:Object(c.jsx)(Ze,{})})]})})]})})};function jt(e){var t=Object(r.useContext)(St),n=Object(r.useState)([]),s=Object(O.a)(n,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,e.next=4,fetch("".concat(f,"/teachers/").concat(t,"/courses"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?o(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)("div",{className:"courses-list",children:Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{}),Object(c.jsx)("th",{children:"COURSE"}),Object(c.jsx)("th",{children:"CATEGORY"}),Object(c.jsx)("th",{children:"HOURS PER WEEK"}),Object(c.jsx)("th",{})]})}),Object(c.jsx)("tbody",{children:a.map((function(e){return Object(c.jsx)(lt,{course:e},e.id)}))})]})})}var lt=function(e){var t=Object(u.i)().url,n=Object(r.useContext)(St),s=Object(r.useState)(0),a=Object(O.a)(s,2),o=a[0],j=a[1];return Object(r.useEffect)((function(){(function(){var t=Object(b.a)(h.a.mark((function t(){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="Bearer "+sessionStorage.getItem("jwt"),t.next=3,fetch("".concat(f,"/teachers/").concat(n,"/courses/").concat(e.course.id,"/hours"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?j(e.result):alert("Error!",e.message,"error")})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[n]),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"color",children:Object(c.jsx)("div",{style:{backgroundColor:D(e.course.id)}})}),Object(c.jsx)("td",{className:"name",children:e.course.name}),Object(c.jsx)("td",{className:"category",children:e.course.category}),Object(c.jsx)("td",{className:"hours",children:o}),Object(c.jsx)("td",{children:Object(c.jsx)(i.b,{to:"".concat(t,"/").concat(e.course.id),children:"View"})})]})},dt=function(e){var t=Object(u.i)().path;return Object(c.jsxs)("div",{className:"courses-page",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Courses"})}),Object(c.jsx)("section",{children:Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{exact:!0,path:"".concat(t,"/"),children:Object(c.jsx)(jt,{})}),Object(c.jsx)(u.b,{path:"".concat(t,"/:courseId"),children:Object(c.jsx)(ut,{})})]})})]})};function ht(e){var t=Object(r.useContext)(St),n=Object(r.useState)([]),s=Object(O.a)(n,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,e.next=4,fetch("".concat(f,"/teachers/").concat(t,"/class"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?o(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(c.jsx)("div",{className:"courses-list",children:Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{}),Object(c.jsx)("th",{children:"COURSE"}),Object(c.jsx)("th",{children:"CATEGORY"}),Object(c.jsx)("th",{children:"HOURS PER WEEK"}),Object(c.jsx)("th",{children:"TEACHER"}),Object(c.jsx)("th",{})]})}),Object(c.jsx)("tbody",{children:a.map((function(e){return Object(c.jsx)(bt,{course:e},e.id)}))})]})})}function bt(e){var t=e.course,n=Object(u.i)().url,s=Object(r.useContext)(St),a=Object(r.useState)(0),o=Object(O.a)(a,2),j=o[0],l=o[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="Bearer "+sessionStorage.getItem("jwt"),e.next=3,fetch("".concat(f,"/teachers/").concat(s,"/courses/").concat(t.id,"/hours"),{headers:{Authorization:n}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?l(e.result):alert("Error!",e.message,"error")})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"color",children:Object(c.jsx)("div",{style:{backgroundColor:D(t.id)}})}),Object(c.jsx)("td",{className:"name",children:t.name}),Object(c.jsx)("td",{className:"category",children:t.category}),Object(c.jsx)("td",{className:"hours",children:j}),Object(c.jsx)("td",{className:"teacher",children:t.firstname+" "+t.lastname}),Object(c.jsx)("td",{children:Object(c.jsx)(i.b,{to:"".concat(n,"/").concat(t.id,"/grades"),children:"View"})})]})}function Ot(e){var t=Object(r.useContext)(St),n=Object(u.h)().courseId,s=Object(r.useState)([]),a=Object(O.a)(s,2),o=a[0],i=a[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sessionStorage.getItem("jwt"),s="Bearer "+r,e.next=4,fetch("".concat(f,"/teachers/").concat(t,"/courses/").concat(n,"/grades"),{headers:{Authorization:s}}).then((function(e){return e.json()})).then((function(e){if("OK"===e.status){var t=I(e.result).map((function(e){return Object(c.jsx)(ft,{name:e.firstname,grades:e.grades},e.id)}));i(t)}else alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,n]),Object(c.jsxs)("div",{className:"student-list",children:[Object(c.jsx)("h2",{children:"Student grades"}),o]})}function ft(e){var t=Object(r.useState)(!0),n=Object(O.a)(t,2),s=n[0],a=n[1];return Object(c.jsxs)("div",{className:"grades",children:[Object(c.jsxs)("div",{className:"head",onClick:function(){return a(!s)},children:[Object(c.jsx)("h4",{children:e.name}),Object(c.jsx)("i",{className:"material-icons",children:"unfold_more"})]}),Object(c.jsx)("div",{className:"body",children:Object(c.jsxs)("table",{className:s?"hidden":"shown",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Grade"}),Object(c.jsx)("th",{children:"Comment"}),Object(c.jsx)("th",{children:"Date"})]})}),Object(c.jsx)("tbody",{children:e.grades.map((function(e){return function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.grade}),Object(c.jsx)("td",{children:e.comment}),Object(c.jsx)("td",{children:e.date})]},e.id)}(e)}))})]})})]})}var mt=function(e){var t=Object(u.i)().path;return Object(c.jsxs)("div",{className:"class",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"My Class"})}),Object(c.jsx)("section",{children:Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{exact:!0,path:"".concat(t,"/"),children:Object(c.jsx)(ht,{})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(t,"/:courseId/grades"),children:Object(c.jsx)(Ot,{})})]})})]})},xt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pt(e){var t=e.event,n=new Date(t.due),r=xt[n.getMonth()],s=n.getDay()<10?"0"+n.getDay():n.getDay(),a=D(e.event.id),o={border:"2px solid ".concat(a),borderRadius:"10px 0 0 10px"};return Object(c.jsxs)("div",{className:"event",children:[Object(c.jsxs)("div",{style:o,className:"event__date",children:[Object(c.jsx)("p",{className:"event__date__day",children:Object(c.jsx)("b",{children:s})}),Object(c.jsx)("p",{className:"event__date__month",children:r})]}),Object(c.jsxs)("div",{className:"event__description",children:[Object(c.jsx)("h4",{children:t.title}),Object(c.jsx)("p",{children:t.classInstanceID?"Class":"School"})]})]})}var vt=function(e){var t=Object(r.useContext)(St),n=Object(r.useState)([]),s=Object(O.a)(n,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,e.next=4,fetch("".concat(f,"/teachers/").concat(t,"/events"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?o(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsxs)("div",{className:"events",children:[Object(c.jsx)("div",{className:"head",children:Object(c.jsx)("h3",{children:"Upcoming Events"})}),Object(c.jsx)("div",{className:"events__list",children:a.map((function(e){return Object(c.jsx)(pt,{event:e},e.id)}))})]})};function gt(e){var t=e.teacher?e.teacher:{},n=Object(u.g)();return Object(c.jsxs)("div",{className:"profile",children:[Object(c.jsxs)("div",{className:"head",children:[Object(c.jsx)("h3",{children:"Profile information"}),Object(c.jsx)("button",{onClick:function(){return n.push("home/profile")},children:"Update"})]}),Object(c.jsxs)("div",{className:"labels",children:[Object(c.jsx)("p",{children:"Name: "}),Object(c.jsx)("p",{children:"Surname: "}),Object(c.jsx)("p",{children:"Email: "}),Object(c.jsx)("p",{children:"Address: "}),Object(c.jsx)("p",{children:"Number: "})]}),Object(c.jsxs)("div",{className:"values",children:[Object(c.jsx)("p",{children:t.firstname}),Object(c.jsx)("p",{children:t.lastname}),Object(c.jsx)("p",{children:t.email}),Object(c.jsx)("p",{children:t.address}),Object(c.jsx)("p",{children:t.phone})]})]})}var yt=function(){var e=Object(r.useContext)(St),t=function(){var t=Object(b.a)(h.a.mark((function t(n){var c,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c="Bearer "+sessionStorage.getItem("jwt"),r=n.target,s=new FormData(r),t.next=6,fetch("".concat(f,"/teachers/").concat(e,"/picture"),{method:"post",headers:{Authorization:c},body:s}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?alert("Success!",e.message,"success"):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Update the profile picture"}),Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsx)("input",{type:"file",name:"file"}),Object(c.jsx)("input",{type:"submit",value:"Update"})]})]})},wt=function(e){var t=Object(r.useContext)(St),n=Object(r.useState)(null),s=Object(O.a)(n,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){var e="Bearer "+sessionStorage.getItem("jwt");fetch("".concat(f,"/teachers/").concat(t),{headers:{Authorization:e}}).then((function(e){return e.json()})).then((function(e){"OK"===e.status?o(e.result):alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}))}),[t]),Object(c.jsxs)("div",{className:"home",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Home"})}),Object(c.jsx)("section",{children:Object(c.jsxs)("div",{className:"dashboard",children:[Object(c.jsx)(vt,{}),Object(c.jsxs)("div",{className:"personal",children:[Object(c.jsx)(gt,{teacher:a}),Object(c.jsx)(yt,{})]})]})})]})};var Ct=function(e){var t=Object(r.useContext)(St),n=Object(r.useState)({firstname:"",lastname:"",email:"",address:"",phone:""}),s=Object(O.a)(n,2),a=s[0],o=s[1];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,e.next=4,fetch("".concat(f,"/teachers/").concat(t),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){return"OK"===e.status?e.result:{}})).then((function(e){return o(e)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var i=function(e){e.preventDefault();var t=e.target,n=t.name,c=t.value;"firstname"!==n&&"lastname"!==n||C(c)?o(Object(l.a)(Object(l.a)({},a),{},Object(j.a)({},n,c))):alert("Error","The firstname and lastname fields should only containt letters, and be no longer than 30 characters","error")},u=function(){var e=Object(b.a)(h.a.mark((function e(n){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),w(a.email)){e.next=6;break}return alert("Error","Invalid email","error"),e.abrupt("return");case 6:if(N(a.phone)){e.next=9;break}return alert("Error","Invalid phone number","error"),e.abrupt("return");case 9:return c=sessionStorage.getItem("jwt"),r="Bearer "+c,e.next=13,fetch("".concat(f,"/teachers/").concat(t),{method:"post",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return"OK"===e.status?e.result:null})).then((function(e){if(!e)throw new Error("teacher could not update due to an internal error");1===e.affectedRows?alert("Success","teacher updated successfully","success"):alert("Error","Something went wrong, pleasy try again","error")})).catch((function(e){return console.log(e.message)}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"user-form",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Your Information"})}),Object(c.jsxs)("section",{children:[Object(c.jsx)("h2",{children:"Update profile info"}),Object(c.jsxs)("form",{className:"teacher-form",onSubmit:u,children:[Object(c.jsxs)("label",{children:["Firstname:",Object(c.jsx)("input",{onChange:i,name:"firstname",value:a.firstname})]}),Object(c.jsxs)("label",{children:["Lastname:",Object(c.jsx)("input",{onChange:i,name:"lastname",value:a.lastname})]}),Object(c.jsxs)("label",{children:["Email:",Object(c.jsx)("input",{type:"email",onChange:i,name:"email",value:a.email})]}),Object(c.jsxs)("label",{children:["Address:",Object(c.jsx)("input",{onChange:i,name:"address",value:a.address})]}),Object(c.jsxs)("label",{children:["Phone number:",Object(c.jsx)("input",{onChange:i,name:"phone",value:a.phone})]}),Object(c.jsx)("button",{children:"Update"})]})]})]})},Nt=function(){var e=Object(r.useContext)(St),t=Object(r.useState)([]),n=Object(O.a)(t,2),s=n[0],a=n[1];return Object(r.useEffect)((function(){(function(){var t=Object(b.a)(h.a.mark((function t(){var n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=sessionStorage.getItem("jwt"),c="Bearer "+n,t.next=4,fetch("".concat(f,"/teachers/").concat(e,"/schedule"),{headers:{Authorization:c}}).then((function(e){return e.json()})).then((function(e){if("OK"===e.status){var t=S(e.result);a(t)}else alert("Error",e.message,"error")})).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(Oe,{days:s})})},St=s.a.createContext(0);var It=function(){var e=Object(u.h)().id,t=Object(u.i)();return Object(c.jsx)(St.Provider,{value:e,children:Object(c.jsxs)("div",{className:"TeacherPage",children:[Object(c.jsx)(ye,{}),Object(c.jsx)("main",{children:Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{exact:!0,path:"".concat(t.path,"/"),children:Object(c.jsx)(u.a,{to:"".concat(t.url,"/home")})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(t.path,"/home"),children:Object(c.jsx)(wt,{teacherId:e})}),Object(c.jsx)(u.b,{exact:!0,path:"".concat(t.path,"/home/profile"),children:Object(c.jsx)(Ct,{})}),Object(c.jsx)(u.b,{path:"".concat(t.path,"/class"),children:Object(c.jsx)(mt,{})}),Object(c.jsx)(u.b,{path:"".concat(t.path,"/courses"),children:Object(c.jsx)(dt,{})}),Object(c.jsx)(u.b,{path:"".concat(t.path,"/schedule"),children:Object(c.jsx)(Nt,{})})]})})]})})},kt=n(27),Et=n.n(kt);document.getElementById&&(window.alert=function(e,t,n){Et()({title:e,text:t,icon:n})});var Dt=function(e){return Object(c.jsx)("div",{className:"app",children:Object(c.jsx)(i.a,{children:Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{exact:!0,path:"/",children:Object(c.jsx)(m,{})}),Object(c.jsx)(u.b,{path:"/s/:id",children:Object(c.jsx)(ge,{})}),Object(c.jsx)(u.b,{path:"/t/:id",children:Object(c.jsx)(It,{})})]})})})};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(Dt,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.6a2aa3a2.chunk.js.map