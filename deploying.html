<!DOCTYPE html>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="./new.css">
    <title>deploying-aws</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>

    <div id="Contents" class="toc"><h1 id="Contents">Contents</a></h1></div>
    <ul>
      <li>
        <a href="deploying-aws.html#Deploying the projects to a server">Deploying the projects to a server</a>

        <ul>
          <li>
            <a href="deploying-aws.html#Deploying the projects to a server-Getting the server">Getting the server</a>

            <li>
              <a href="deploying-aws.html#Deploying the projects to a server-Install nvm">Install nvm</a>

              <li>
                <a href="deploying-aws.html#Deploying the projects to a server-Installing node">Installing node</a>

                <li>
                  <a href="deploying-aws.html#Deploying the projects to a server-Set up mysql">Set up mysql</a>

                  <li>
                    <a href="deploying-aws.html#Deploying the projects to a server-Set up the projects">Set up the projects</a>

                    <li>
                      <a href="deploying-aws.html#Deploying the projects to a server-Configuring the IP address">Configuring the IP address</a>

                      <li>
                        <a href="deploying-aws.html#Deploying the projects to a server-Set up port forwarding">Set up port forwarding</a>

                        <ul>
                          <li>
                            <a href="deploying-aws.html#Deploying the projects to a server-Set up port forwarding-In AWS">In AWS</a>

                            <li>
                              <a href="deploying-aws.html#Deploying the projects to a server-Set up port forwarding-Other servers">Other servers</a>

                        </ul>
        </ul>
    </ul>

    <div id="Deploying the projects to a server"><h1 id="Deploying the projects to a server" class="header"><a href="#Deploying the projects to a server">Deploying the projects to a server</a></h1></div>

    <div id="Deploying the projects to a server-Getting the server"><h2 id="Getting the server" class="header"><a href="#Deploying the projects to a server-Getting the server">Getting the server</a></h2></div>
    <p>
    Get an ubuntu server. This can work with other distributions but the names of
    the tools may vary.
    </p>

    <div id="Deploying the projects to a server-Install nvm"><h2 id="Install nvm" class="header"><a href="#Deploying the projects to a server-Install nvm">Install nvm</a></h2></div>
    <p>
    The next step is to install <code>nvm</code> to manage node versions.
    </p>
    <ol>
      <li>
        First you need to install <code>curl</code>:
        <pre>
sudo apt install curl
        </pre>

        <li>
          Then install nvm with the following:
          <pre>
curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash
          </pre>

          <li>
            Then in order not to have to reload the ssh session just source the new
            .bashrc file, because the nvm installation modified it.
            <pre>
source ~/.bashrc
            </pre>

    </ol>

    <div id="Deploying the projects to a server-Installing node"><h2 id="Installing node" class="header"><a href="#Deploying the projects to a server-Installing node">Installing node</a></h2></div>
    <p>
    <span id="Deploying the projects to a server-Installing node-NOTE: the project is using node version 14.15.1, so that is the version you should install"></span><strong id="NOTE: the project is using node version 14.15.1, so that is the version you should install">NOTE: the project is using node version 14.15.1, so that is the version you should install</strong>
    </p>

    <p>
    You can either install the latest version 
    </p>
    <pre>
nvm install node
    </pre>
    <p>
    Or install a specific version:
    </p>
    <pre>
nvm install 14.15.1
    </pre>
    <p>
    Some useful commands:
    </p>
    <ul>
      <li>
        <code>nvm ls</code> -- list the installed node environments

        <li>
          <code>nvm ls-remote</code> -- list the available node versions for installation

          <li>
            <code>nvm use 14.15.1</code> -- use this specific version of node

    </ul>

    <div id="Deploying the projects to a server-Set up mysql"><h2 id="Set up mysql" class="header"><a href="#Deploying the projects to a server-Set up mysql">Set up mysql</a></h2></div>
    <p>
    First install mysql-server:
    </p>
    <pre>
sudo apt install mysql-server
    </pre>
    <p>
    Create the database in mysql:
    </p>
    <pre>
mysql &gt; create database education;
    </pre>
    <p>
    Where in our case the database name is "education".
    Create the user for the database(this is also our default user: user-password):
    </p>
    <pre>
mysql &gt; CREATE USER 'user'@'localhost' IDENTIFIED WITH mysql_native_password BY
'password';
    </pre>
    <p>
    Grant the privileges(instead of granting the user access on all databases, you
    can grant to only one by replacing * . * with <em>dbname</em>.*):
    </p>
    <pre>
mysql &gt; GRANT ALL PRIVILEGES ON *.* TO 'user'@'localhost';
mysql &gt; FLUSH PRIVILEGES;
    </pre>

    <div id="Deploying the projects to a server-Set up the projects"><h2 id="Set up the projects" class="header"><a href="#Deploying the projects to a server-Set up the projects">Set up the projects</a></h2></div>
    <ul>
      <li>
        Git clone all the needed projects.
        <pre>
git clone https://github.com/Ergys2000/EduManageServer.git
git clone https://github.com/Ergys2000/EduManageClient.git
git clone https://github.com/Ergys2000/EduManageAdmin.git
        </pre>

        <li>
          Go inside each folder and do <code>npm install</code> (pray for no errors)
          <pre>
cd EduManageClient; npm install
cd EduManageAdmin; npm install
cd EduManageServer; npm install
          </pre>

    </ul>
    <p>
    <span id="Deploying the projects to a server-Set up the projects-NOTE:"></span><strong id="NOTE:">NOTE:</strong> If you get any errors, make sure you are using node version 14.15.1
    </p>
    <ul>
      <li>
        Execute the table creation file(it is in the EduManageServer folder):
        <pre>
cd EduManageServer
sudo mysql education &lt; databasefile.sql
        </pre>

        <li>
          Go inside each folder and do <code>npm start&amp;</code>

    </ul>

    <p>
    After this all the servers should be running.
    </p>
    <div id="Deploying the projects to a server-Configuring the IP address"><h2 id="Configuring the IP address" class="header"><a href="#Deploying the projects to a server-Configuring the IP address">Configuring the IP address</a></h2></div>
    <p>
    Now that all the servers are running we need to configure the client and admin
    apps to perform the api requests to the correct ip address. To do this we need
    to change two files:
    </p>
    <ul>
      <li>
        <code>EduManageClient/src/API.js</code>

        <li>
          <code>EduManageAdmin/src/API.tsx</code>

    </ul>
    <p>
    What we need to do is change the <code>apiLink</code> variable in each one of them.
    Instead of the value there we need to put <code>http://&lt;ip address&gt;:5000</code>, where &lt;ip
    address&gt; is the ip address of the server.
    </p>

    <div id="Deploying the projects to a server-Set up port forwarding"><h2 id="Set up port forwarding" class="header"><a href="#Deploying the projects to a server-Set up port forwarding">Set up port forwarding</a></h2></div>
    <div id="Deploying the projects to a server-Set up port forwarding-In AWS"><h3 id="In AWS" class="header"><a href="#Deploying the projects to a server-Set up port forwarding-In AWS">In AWS</a></h3></div>
    <ul>
      <li>
        Go to security settings of the instance

        <li>
          Go security group and click the security group.

          <li>
            Click <code>Edit Inbound Rules</code> on the table

            <li>
              Add the desired ports and save.

    </ul>

    <div id="Deploying the projects to a server-Set up port forwarding-Other servers"><h3 id="Other servers" class="header"><a href="#Deploying the projects to a server-Set up port forwarding-Other servers">Other servers</a></h3></div>
    <p>
    Just make sure that requests to the needed ports:
    </p>
    <ul>
      <li>
        3000 (Admin app)

        <li>
          4000 (Teacher/Student app)

          <li>
            5000 (API)

    </ul>
    <p>
    Are correctly forwarded.
    </p>

  </body>
</html>
